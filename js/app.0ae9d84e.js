(function(){"use strict";var t={7734:function(t,e,a){var s=a(9242),n=a(3396),i=a(7139);const r={id:"sidebar"};function o(t,e,a,o,l,h){const c=(0,n.up)("AppMenu"),u=(0,n.up)("NavBar"),d=(0,n.up)("router-view"),g=(0,n.up)("LoadingEffect");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{onClick:e[0]||(e[0]=t=>h.toggleMenu()),id:"sidebar-bg"},null,512),[[s.F8,l.isMenuOpen]])])),_:1}),(0,n.Wm)(s.uT,{name:"fade-in-left"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",r,[(0,n.Wm)(c)],512),[[s.F8,l.isMenuOpen]])])),_:1}),(0,n._)("div",{id:"main",class:(0,i.C_)({noMarginLeft:!l.isMenuOpen})},[(0,n.Wm)(u,{onToggleMenu:e[1]||(e[1]=t=>h.toggleMenu())}),(0,n.Wm)(d,null,{default:(0,n.w5)((({Component:t})=>[(0,n.Wm)(s.uT,{name:"fade-in-fast",mode:"out-in"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(t)))])),_:2},1024)])),_:1})],2),(0,n.Wm)(g)],64)}var l=a(65);const h=t=>((0,n.dD)("data-v-481ded12"),t=t(),(0,n.Cn)(),t),c={id:"appmenu-top"},u={key:0},d=h((()=>(0,n._)("img",{src:"/img/icons/180.png",class:"avatar d-block mx-auto"},null,-1))),g=h((()=>(0,n._)("h3",null,"MTLKMS",-1))),m=h((()=>(0,n._)("hr",null,null,-1))),p=h((()=>(0,n._)("p",null,"Học hành chăm chỉ :(",-1))),y=[d,g,m,p],w={key:1},_=["src"],f=(0,n.Uk)("Xin chào "),v=(0,n.Uk)("!"),D=h((()=>(0,n._)("hr",null,null,-1))),k={key:0},b=(0,n.Uk)(" Bạn đang học môn "),T={key:1},L=h((()=>(0,n._)("hr",null,null,-1))),M=h((()=>(0,n._)("p",null,"Bạn còn 99 mục tiêu hằng ngày chưa hoàn tất!",-1))),I={class:"material-icons"};function S(t,e,a,s,r,o){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",c,[t.isLogin?((0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("img",{src:t.user.avatarURL,class:"avatar d-block mx-auto"},null,8,_),(0,n._)("h3",null,[f,(0,n._)("span",{style:(0,i.j5)({color:t.user.color})},(0,i.zw)(t.user.name),5),v]),D,(0,n._)("p",null,[t.learningDiary?((0,n.wg)(),(0,n.iD)("span",k,[b,(0,n.Wm)(l,{to:"/study-diary/"+t.learningDiary.diary.sdtag},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.learningDiary.diary.name),1)])),_:1},8,["to"])])):((0,n.wg)(),(0,n.iD)("span",T," Bạn hiện chưa học gì! "))]),L,M])):((0,n.wg)(),(0,n.iD)("div",u,y))]),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.links,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a},[t.isLogin==e.auth?((0,n.wg)(),(0,n.j4)(l,{key:0,to:e.path,class:(0,i.C_)({active:o.isActive(e),link:!0})},{default:(0,n.w5)((()=>[(0,n._)("span",I,(0,i.zw)(e.icon),1),(0,n.Uk)(" "+(0,i.zw)(e.name),1)])),_:2},1032,["to","class"])):(0,n.kq)("",!0)])))),128))])])}var C={name:"AppMenu",data(){return{links:[{name:"Trang Chủ",path:"/",icon:"home",auth:!0},{name:"Cá Nhân",path:"/profile",icon:"person",auth:!0},{name:"Nhật Ký Thời Gian Học",path:"/study-diary",icon:"assignment",auth:!0},{name:"Các Vịt Khác",path:"/users",icon:"people",auth:!0},{name:"Hướng Dẫn",path:"/guide",icon:"library_books",auth:!0},{name:"Đăng Nhập",path:"/login",icon:"login",auth:!1},{name:"Đăng Ký",path:"/register",icon:"person",auth:!1},{name:"Đăng Xuất",path:"/logout",icon:"logout",auth:!0}]}},methods:{isActive(t){let e=this.$route.path.split("/");return t.path.replace("/","")==e[1]}},computed:{...(0,l.rn)(["user","isLogin","learningDiary"])}},U=a(89);const P=(0,U.Z)(C,[["render",S],["__scopeId","data-v-481ded12"]]);var x=P;const V={id:"navbar"};function z(t,e,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("span",{onClick:e[0]||(e[0]=e=>t.$emit("toggleMenu")),class:"material-icons"},"menu"),(0,n._)("p",null,(0,i.zw)(t.title),1)])}var N={name:"NavBar",data(){return{}},computed:{...(0,l.rn)(["title"])}};const E=(0,U.Z)(N,[["render",z],["__scopeId","data-v-c4dc8af4"]]);var j=E;const O=t=>((0,n.dD)("data-v-8eb54cee"),t=t(),(0,n.Cn)(),t),A={class:"main"},W=O((()=>(0,n._)("div",{class:"static-bar"},null,-1))),K=O((()=>(0,n._)("div",{class:"move-bar"},null,-1))),H=[W,K];function q(t,e,a,i,r,o){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",A,H,512),[[s.F8,t.isLoading]])])),_:1})])}var B={name:"LoadingEffect",data(){return{}},computed:{...(0,l.rn)(["isLoading"])}};const R=(0,U.Z)(B,[["render",q],["__scopeId","data-v-8eb54cee"]]);var F=R,$={name:"App",components:{AppMenu:x,LoadingEffect:F,NavBar:j},created(){this.isLogin||"/login"===location.pathname||"/register"===location.pathname||"/forget-password"===location.pathname||"/404"===location.pathname||(this.setRedirect(location.pathname+location.search),this.$router.push("/login")),innerWidth>768&&(this.isMenuOpen=!0),window.addEventListener("resize",(()=>{innerWidth>768?this.isMenuOpen=!0:this.isMenuOpen=!1})),sessionStorage.clear()},data(){return{isMenuOpen:!1}},methods:{...(0,l.OI)(["setRedirect"]),toggleMenu(){this.isMenuOpen=!this.isMenuOpen}},computed:{...(0,l.rn)(["isLogin"])},watch:{$route:{immediate:!0,handler(){innerWidth<768&&(this.isMenuOpen=!1)}}}};const Z=(0,U.Z)($,[["render",o]]);var Y=Z,G=(a(2801),a(8675),a(3462),a(1703),a(5431));class J{constructor(){this.host="https://mtlkms.vitcon.cf"}get(t){return fetch(this.host+t,{method:"GET",credentials:"include"})}getAvatarURL(t){return this.host+"/user/"+t+"/avatar"}post(t,e){return fetch(this.host+t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}put(t,e){return fetch(this.host+t,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}delete(t,e){return fetch(this.host+t,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}sendFormData(t,e,a="POST"){return fetch(this.host+t,{method:a,credentials:"include",body:e})}updateAvatar(t){return fetch(`${this.host}/user/avatar`,{method:"PUT",credentials:"include",body:t})}}var X=new J;function Q(t){const e="=".repeat((4-t.length%4)%4),a=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(a),n=new Uint8Array(s.length);for(let i=0;i<s.length;++i)n[i]=s.charCodeAt(i);return n}function tt(t,e){if(e||"granted"!=Notification.permission)return;const a={userVisibleOnly:!0,applicationServerKey:Q("BN4kljVkxbUiIhT8YbiEABdDXTVAtxvIaG9GmDyi7a8Ce8-DNIh8hHP_CGSVuRrzZyTqXqVM-WOmBVK4D4sOMq8")};t.pushManager.subscribe(a).then((t=>{et(t)}))}async function et(t){try{let e=await X.post("/notifi",t),a=await e.json();if(200!==e.status)throw new Error(a.error)}catch(e){console.log(e.message)}}(0,G.z)("/service-worker.js",{ready(t){t.pushManager.getSubscription().then((e=>{tt(t,e);const a=new BroadcastChannel("bc1");a.onmessage=a=>{"grant-notifi-perm"===a.data&&tt(t,e)}}))},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var at=a(678),st={title:"Góc Nhỏ Của Nhà Vịt - MTLKMS",isLogin:!1,isLoading:!1,redirect:null,user:{id:"",name:"",email:"",username:"",slogan:"",created_at:"",avatarURL:"",color:""},learningDiary:!1,users:{}},nt={setTitle(t,e){document.title=e,t.title=e},setIsLogin(t,e){t.isLogin=e},setIsLoading(t,e){t.isLoading=e},setUserData(t,e){t.user=e},setLearningDiary(t,e){t.learningDiary=e},setAvatarURL(t,e){let a=X.getAvatarURL(e);t.user.avatarURL=a},setRedirect(t,e){t.redirect=e},setUsers(t,e){e.forEach((e=>{t.users[e.username]=e}))}},it={async login({commit:t},e){t("setIsLoading",!0);try{const a=await X.post("/login",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return t("setIsLogin",!0),t("setUserData",s.user),t("setAvatarURL",s.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async checkLogin({commit:t}){t("setIsLoading",!0);try{let e=await X.get("/check-login"),a=await e.json();if(t("setIsLoading",!1),200!==e.status)throw new Error("Check login failed");return t("setIsLogin",!0),t("setUserData",a.user),t("setAvatarURL",a.user.username),!0}catch(e){throw t("setIsLoading",!1),e}},async getLearningDiary({commit:t,state:e},a){t("setIsLoading",!0);try{let s=a||e.user.id,n=await X.get("/study-diary/diary/"+s),i=await n.json();if(t("setIsLoading",!1),200!=n.status)throw new Error(i.error);if(a)return i.data;if(1===i.data.diary.is_learning)return t("setLearningDiary",i.data),!0}catch(s){throw t("setIsLoading",!1),s}},async register({commit:t},e){t("setIsLoading",!0);try{const a=await X.post("/register",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return t("setIsLogin",!0),t("setUserData",s.user),t("setAvatarURL",s.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async updateProfile({commit:t},e){t("setIsLoading",!0);try{const a=await X.put("/user",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return t("setUserData",s.user),t("setAvatarURL",s.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async updatePassword({commit:t},e){t("setIsLoading",!0);try{const a=await X.put("/user/password",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return!0}catch(a){throw t("setIsLoading",!1),a}},async fetchUsers({commit:t,state:e}){if(Object.keys(e.users).length>0)return!0;t("setIsLoading",!0);try{let e=await X.get("/user"),a=await e.json();if(t("setIsLoading",!1),200==e.status)return t("setUsers",a.data),!0;throw new Error(a.error)}catch(a){throw t("setIsLoading",!1),a}}},rt={getUserName:t=>t.user.name,getUserUsername:t=>t.user.username,getUserSlogan:t=>t.user.slogan,getUserColor:t=>t.user.color};const ot=(0,l.MT)({state:st,mutations:nt,actions:it,getters:rt});var lt=ot;const ht=t=>((0,n.dD)("data-v-69cc8de0"),t=t(),(0,n.Cn)(),t),ct={class:"container container-sm"},ut=ht((()=>(0,n._)("h2",{class:"mb-4"},"Đăng nhập",-1))),dt={class:"input"},gt=ht((()=>(0,n._)("span",{class:"material-icons"},"person",-1))),mt=ht((()=>(0,n._)("p",null,"Username",-1))),pt={class:"input"},yt=ht((()=>(0,n._)("span",{class:"material-icons"},"lock",-1))),wt=ht((()=>(0,n._)("p",null,"Password",-1))),_t={class:"footer"},ft=ht((()=>(0,n._)("button",{class:"btn btn-primary"},[(0,n._)("span",{class:"material-icons mr-2"},"login"),(0,n.Uk)(" Đăng nhập ")],-1))),vt=(0,n.Uk)("Chưa có tài khoản? "),Dt=(0,n.Uk)("[Đăng Ký]"),kt=(0,n.Uk)("[Quên Mật Khẩu]");function bt(t,e,a,r,o,l){const h=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",ct,[(0,n._)("form",{action:"",method:"POST",onSubmit:e[2]||(e[2]=(0,s.iM)((t=>l.submitForm()),["prevent"]))},[ut,(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{class:(0,i.C_)(["log",o.isSuccess?"success":"error"])},[(0,n._)("p",null,(0,i.zw)(o.apiLog),1),(0,n._)("p",null,(0,i.zw)(o.log),1)],2),[[s.F8,o.log]])])),_:1}),(0,n._)("label",dt,[gt,(0,n.wy)((0,n._)("input",{type:"text",name:"username",required:"",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.username=t)},null,512),[[s.nr,o.form.username]]),mt]),(0,n._)("label",pt,[yt,(0,n.wy)((0,n._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.password=t)},null,512),[[s.nr,o.form.password]]),wt]),(0,n._)("div",_t,[ft,(0,n._)("div",null,[(0,n._)("p",null,[vt,(0,n.Wm)(h,{to:"/register"},{default:(0,n.w5)((()=>[Dt])),_:1})]),(0,n._)("p",null,[(0,n.Wm)(h,{to:"/forget-password"},{default:(0,n.w5)((()=>[kt])),_:1})])])])],32)])}var Tt={name:"LoginView",created(){this.checkIfLoggedIn()},data(){return{form:{username:"",password:""},isSuccess:!1,apiLog:"",log:""}},computed:{...(0,l.rn)(["isLogin","redirect"])},methods:{...(0,l.nv)(["login","checkLogin","getLearningDiary"]),...(0,l.OI)(["setRedirect"]),async submitForm(){try{let e=await this.login(this.form);if(!e)return;this.isSuccess=!0,this.apiLog="",this.log="Đăng nhập thành công";try{await this.getLearningDiary()}catch(t){console.log("Bạn không đang học môn nào - ",t.message)}this.$router.push("/")}catch(t){this.isSuccess=!1,this.apiLog=t.message,this.showLog()}},showLog(){"Username not found or password is incorrect"==this.apiLog?this.log="Tên đăng nhập hoặc mật khẩu không chính xác":this.log="Đã có lỗi xảy ra"},runRedirect(){this.redirect&&"/login"!=this.redirect&&"/register"!=this.redirect&&"/forget-password"!=this.redirect?(this.$router.push(this.redirect),this.setRedirect(null)):this.$router.push("/")},async checkIfLoggedIn(){this.isLogin&&this.runRedirect(),await this.checkLogin();try{await this.getLearningDiary()}catch(t){console.log("Bạn không đang học môn nào - ",t.message)}this.runRedirect()}}};const Lt=(0,U.Z)(Tt,[["render",bt],["__scopeId","data-v-69cc8de0"]]);var Mt=Lt;const It=t=>((0,n.dD)("data-v-5698d18a"),t=t(),(0,n.Cn)(),t),St={class:"container container-sm"},Ct=It((()=>(0,n._)("h2",{class:"mb-4"},"Đăng ký",-1))),Ut={class:"input"},Pt=It((()=>(0,n._)("span",{class:"material-icons"},"label",-1))),xt=It((()=>(0,n._)("p",null,"Tên hiển thị",-1))),Vt={class:"input"},zt=It((()=>(0,n._)("span",{class:"material-icons"},"person",-1))),Nt=It((()=>(0,n._)("p",null,"Tên đăng nhập",-1))),Et={class:"input"},jt=It((()=>(0,n._)("span",{class:"material-icons"},"email",-1))),Ot=It((()=>(0,n._)("p",null,"Email",-1))),At={class:"input"},Wt=It((()=>(0,n._)("span",{class:"material-icons"},"lock",-1))),Kt=It((()=>(0,n._)("p",null,"Mật khẩu",-1))),Ht={class:"input"},qt=It((()=>(0,n._)("span",{class:"material-icons"},"lock",-1))),Bt=It((()=>(0,n._)("p",null,"Re-password",-1))),Rt={class:"footer"},Ft=It((()=>(0,n._)("button",{class:"btn btn-primary"},[(0,n._)("span",{class:"material-icons mr-2"},"send"),(0,n.Uk)(" Đăng ký ")],-1))),$t=(0,n.Uk)("Đã có tài khoản? "),Zt=(0,n.Uk)("[Đăng Nhập]"),Yt=(0,n.Uk)("[Quên Mật Khẩu]");function Gt(t,e,a,r,o,l){const h=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",St,[(0,n._)("form",{action:"",method:"POST",onSubmit:e[5]||(e[5]=(0,s.iM)((t=>l.submitForm()),["prevent"]))},[Ct,(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{class:(0,i.C_)(["log",o.isSuccess?"success":"error"])},[(0,n._)("p",null,(0,i.zw)(o.apiLog),1),(0,n._)("p",null,(0,i.zw)(o.log),1)],2),[[s.F8,o.log]])])),_:1}),(0,n._)("label",Ut,[Pt,(0,n.wy)((0,n._)("input",{type:"text",name:"name",required:"",placeholder:"Tên hiển thị","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.name=t)},null,512),[[s.nr,o.form.name]]),xt]),(0,n._)("label",Vt,[zt,(0,n.wy)((0,n._)("input",{type:"text",name:"username",required:"",placeholder:"Tên đăng nhập","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.username=t)},null,512),[[s.nr,o.form.username]]),Nt]),(0,n._)("label",Et,[jt,(0,n.wy)((0,n._)("input",{type:"email",name:"email",required:"",placeholder:"Email","onUpdate:modelValue":e[2]||(e[2]=t=>o.form.email=t)},null,512),[[s.nr,o.form.email]]),Ot]),(0,n._)("label",At,[Wt,(0,n.wy)((0,n._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":e[3]||(e[3]=t=>o.form.password=t)},null,512),[[s.nr,o.form.password]]),Kt]),(0,n._)("label",Ht,[qt,(0,n.wy)((0,n._)("input",{type:"password",name:"repassword",required:"",placeholder:"Nhập lại mật khẩu","onUpdate:modelValue":e[4]||(e[4]=t=>o.form.repassword=t)},null,512),[[s.nr,o.form.repassword]]),Bt]),(0,n._)("div",Rt,[Ft,(0,n._)("div",null,[(0,n._)("p",null,[$t,(0,n.Wm)(h,{to:"/login"},{default:(0,n.w5)((()=>[Zt])),_:1})]),(0,n._)("p",null,[(0,n.Wm)(h,{to:"/forget-password"},{default:(0,n.w5)((()=>[Yt])),_:1})])])])],32)])}var Jt={name:"RegisterView",data(){return{form:{name:"",username:"",email:"",password:"",repassword:""},apiLog:"",log:"",isSuccess:!1}},methods:{...(0,l.nv)(["register"]),...(0,l.OI)(["setIsLoading"]),async submitForm(){if(this.form.password!==this.form.repassword)return this.log="Mật khẩu không khớp",void(this.isSuccess=!1);try{let t=await this.register(this.form);if(!t)return;this.isSuccess=!0,this.apiLog="",this.log="Đăng ký thành công",this.$router.push("/")}catch(t){this.isSuccess=!1,this.apiLog=t.message,this.showLog()}},showLog(){"Invalid name"==this.apiLog?this.log="Tên phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Invalid email"==this.apiLog?this.log="Email không đúng định dạng":"Invalid username"==this.apiLog?this.log="Tên đăng nhập phải từ 3 đến 20 kí tự, không bao gồm khoảng trống và kí tự đặc biệt":"Invalid password"==this.apiLog?this.log="Mật khẩu phải lớn hơn 6 kí tự, bao gồm chữ cái viết thường, viết hoa, số và kí tự đặc biệt":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'username')/gi.test(this.apiLog)?this.log="Tên đăng nhập đã tồn tại":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'email')/gi.test(this.apiLog)?this.log="Email đã tồn tại":this.log="Đã có lỗi xảy ra"}}};const Xt=(0,U.Z)(Jt,[["render",Gt],["__scopeId","data-v-5698d18a"]]);var Qt=Xt;const te={class:"container container-sm"},ee=(0,n._)("h2",{class:"mb-4"},"Đăng xuất",-1),ae=(0,n._)("p",null,"Bạn có chắc muốn đăng xuất không?",-1),se=(0,n._)("span",{class:"material-icons mr-2"},"logout",-1),ne=(0,n.Uk)(" Đăng xuất "),ie=[se,ne];function re(t,e,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",te,[ee,ae,(0,n._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>r.logout&&r.logout(...t))},ie)])}var oe={name:"LogoutView",data(){return{}},methods:{...(0,l.OI)(["setIsLoading"]),logout(){this.setIsLoading(!0),X.get("/logout").then((()=>{location.href="/login"})).catch((()=>{this.setIsLoading(!1)}))}}};const le=(0,U.Z)(oe,[["render",re]]);var he=le;const ce={class:"container container-sm"},ue=(0,n._)("h3",null,"Email của bạn:",-1),de=(0,n._)("p",{class:"text-secondary"},"Một mã xác nhận sẽ được gửi tới email của bạn. Nếu không tìm thấy, vui lòng kiểm tra bao gồm hòm thư spam.",-1),ge={class:"input"},me=(0,n._)("span",{class:"material-icons"},"mail",-1),pe=(0,n._)("p",null,"Email",-1),ye=(0,n._)("button",{class:"btn btn-primary mt-4"},[(0,n._)("span",{class:"material-icons mr-2"},"send"),(0,n.Uk)(" Next ")],-1),we=(0,n._)("h3",null,"Nhập mã xác nhận",-1),_e=(0,n._)("p",{class:"text-secondary"},"Nhập mã xác nhận vừa được gửi đến email của bạn. Mã xác nhận có hiệu lực trong 5 phút.",-1),fe={class:"input"},ve=(0,n._)("span",{class:"material-icons"},"code",-1),De=(0,n._)("p",null,"Code",-1),ke=(0,n._)("br",null,null,-1),be=(0,n._)("hr",null,null,-1),Te=(0,n._)("br",null,null,-1),Le=(0,n._)("h3",null,"Đổi mật khẩu",-1),Me=(0,n._)("p",{class:"text-secondary"},"Mật khẩu phải từ 6 ký tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt.",-1),Ie={class:"input"},Se=(0,n._)("span",{class:"material-icons"},"lock",-1),Ce=(0,n._)("p",null,"New Password",-1),Ue={class:"input"},Pe=(0,n._)("span",{class:"material-icons"},"lock",-1),xe=(0,n._)("p",null,"Re-Password",-1),Ve=(0,n._)("button",{class:"btn btn-primary mt-4"},[(0,n._)("span",{class:"material-icons mr-2"},"send"),(0,n.Uk)(" Next ")],-1);function ze(t,e,a,i,r,o){const l=(0,n.up)("message-popup");return(0,n.wg)(),(0,n.iD)("div",ce,[(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[r.isStartSendEmail?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("form",{key:0,action:"",onSubmit:e[1]||(e[1]=(0,s.iM)(((...t)=>o.sendEmail&&o.sendEmail(...t)),["prevent"]))},[ue,de,(0,n._)("label",ge,[me,(0,n.wy)((0,n._)("input",{name:"email",type:"email",required:"",placeholder:"Email","onUpdate:modelValue":e[0]||(e[0]=t=>r.email=t)},null,512),[[s.nr,r.email]]),pe]),ye],32))])),_:1}),(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[r.isSendEmail?((0,n.wg)(),(0,n.iD)("form",{key:0,action:"",onSubmit:e[5]||(e[5]=(0,s.iM)(((...t)=>o.updatePassword&&o.updatePassword(...t)),["prevent"]))},[we,_e,(0,n._)("label",fe,[ve,(0,n.wy)((0,n._)("input",{name:"verificationCode",type:"text",required:"",placeholder:"Code","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.verificationCode=t)},null,512),[[s.nr,r.form.verificationCode]]),De]),ke,be,Te,Le,Me,(0,n._)("label",Ie,[Se,(0,n.wy)((0,n._)("input",{type:"password",required:"",placeholder:"New Password","onUpdate:modelValue":e[3]||(e[3]=t=>r.form.newPassword=t)},null,512),[[s.nr,r.form.newPassword]]),Ce]),(0,n._)("label",Ue,[Pe,(0,n.wy)((0,n._)("input",{type:"password",required:"",placeholder:"Re-Password","onUpdate:modelValue":e[4]||(e[4]=t=>r.form.rePassword=t)},null,512),[[s.nr,r.form.rePassword]]),xe]),Ve],32)):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(l,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}const Ne={class:"popup"},Ee={class:"container container-sm"},je={class:"d-flex justify-content-center align-items-center"},Oe={class:"material-icons mr-2"};function Ae(t,e,a,r,o,l){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",Ne,[(0,n._)("div",{class:"popup-bg",onClick:e[0]||(e[0]=t=>l.close())}),(0,n._)("div",Ee,[(0,n._)("div",{class:(0,i.C_)(a.type)},[(0,n._)("div",je,[(0,n._)("span",Oe,(0,i.zw)(l.icon),1),(0,n._)("h3",null,(0,i.zw)(a.title),1)]),(0,n._)("span",{class:"material-icons btn-close",onClick:e[1]||(e[1]=t=>l.close())},"close")],2),(0,n._)("div",null,[(0,n._)("p",null,(0,i.zw)(a.message),1)])])],512),[[s.F8,o.display]])])),_:1})])}var We={name:"MessagePopup",props:{title:{type:String,default:""},message:{type:String,default:""},type:{type:String,default:"success"},isDisplay:{type:Boolean,default:!1}},data(){return{display:!1}},methods:{close(){this.display=!1}},watch:{isDisplay(){this.display=!0}},computed:{icon(){switch(this.type){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";default:return"check_circle"}}}};const Ke=(0,U.Z)(We,[["render",Ae]]);var He=Ke,qe={name:"ForgetPwdView",components:{MessagePopup:He},data(){return{isStartSendEmail:!1,isSendEmail:!1,email:"",form:{verificationCode:"",newPassword:"",rePassword:""},message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{...(0,l.OI)(["setIsLoading"]),async sendEmail(){try{this.isStartSendEmail=!0,this.setIsLoading(!0);let t=await X.post("/forget-password",{email:this.email}),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.error);this.isSendEmail=!0}catch(t){this.isStartSendEmail=!1,this.setIsLoading(!1),"Email not found"==t.message?this.showMessage("Lỗi","Không tìm thấy người dùng","error"):this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error")}},async updatePassword(){if(this.form.newPassword!==this.form.rePassword)throw this.showMessage("Lỗi","Mật khẩu không khớp","warning"),new Error("Password does not match");try{this.setIsLoading(!0);let t=await X.put("/forget-password",{email:this.email,validateCode:this.form.verificationCode,newPassword:this.form.newPassword}),e=await t.json();if(this.setIsLoading(!1),200!=t.status)throw new Error(e.error);this.showMessage("Thành công!","Cập nhật mật khẩu mới thành công!","success"),setTimeout((()=>{location.href="/login"}),3e3)}catch(t){this.setIsLoading(!1);let e="";e="Email not found"==t.message?"Không tìm thấy người dùng":"Code has expired"==t.message?"Mã bảo mật đã hết hạn":"Code is not valid"==t.message?"Mã bảo mật không chính xác":"Update Password failed"==t.message?"Cập nhật mật khẩu không thành công, vui lòng thử lại sau":"Invalid password"==t.message?"Mật khẩu phải từ 6 kí tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt":"Không thể kết nối đến máy chủ",this.showMessage("Lỗi",e,"error")}},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay}}};const Be=(0,U.Z)(qe,[["render",ze]]);var Re=Be,Fe=[{path:"/login",name:"login",component:Mt,meta:{title:"Đăng Nhập - MTLKMS"}},{path:"/register",name:"register",component:Qt,meta:{title:"Đăng Ký - MTLKMS"}},{path:"/logout",name:"logout",component:he,meta:{title:"Đăng Xuất - MTLKMS"}},{path:"/forget-password",name:"forget-password",component:Re,meta:{title:"Quên mật khẩu"}}];const $e={class:"container container-md"},Ze=(0,n._)("hr",null,null,-1),Ye=(0,n._)("h3",{class:"mb-4"},"Nhật ký thời gian học",-1);function Ge(t,e,a,s,i,r){const o=(0,n.up)("Profile"),l=(0,n.up)("ContributionDiary");return(0,n.wg)(),(0,n.iD)("div",$e,[(0,n.Wm)(o),Ze,Ye,(0,n.Wm)(l,{"time-today":Number(t.$store.state.user.time_today)},null,8,["time-today"])])}const Je=t=>((0,n.dD)("data-v-b3abf8d0"),t=t(),(0,n.Cn)(),t),Xe={class:"main"},Qe=["src","alt"],ta={class:"text-secondary"},ea={key:0,class:"text-secondary"},aa={key:1},sa=(0,n.Uk)("[Edit Profile]"),na={key:2},ia=Je((()=>(0,n._)("br",null,null,-1))),ra=[ia],oa=Je((()=>(0,n._)("th",null,"Hôm nay:",-1))),la=Je((()=>(0,n._)("th",null,"Tuần:",-1))),ha=Je((()=>(0,n._)("th",null,"Tháng:",-1))),ca=Je((()=>(0,n._)("th",null,"Năm:",-1))),ua=Je((()=>(0,n._)("th",null,"Tổng:",-1)));function da(t,e,a,s,r,o){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",Xe,[(0,n._)("img",{src:o.getAvatarURL(),alt:r.user.username,class:"avatar-xl"},null,8,Qe),(0,n._)("div",null,[(0,n._)("h3",{style:(0,i.j5)({color:r.user.color})},(0,i.zw)(r.user.name),5),(0,n._)("p",ta,(0,i.zw)(r.user.username)+" - Tham gia "+(0,i.zw)(o.convertTimestampToLocalDate(r.user.created_at)),1),r.auth?((0,n.wg)(),(0,n.iD)("p",ea,(0,i.zw)(r.user.email),1)):(0,n.kq)("",!0),(0,n._)("p",null,(0,i.zw)(r.user.slogan),1),r.auth?((0,n.wg)(),(0,n.iD)("p",aa,[(0,n.Wm)(l,{to:"/profile/edit"},{default:(0,n.w5)((()=>[sa])),_:1})])):((0,n.wg)(),(0,n.iD)("p",na,ra))]),(0,n._)("table",null,[(0,n._)("tr",null,[oa,(0,n._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_today)),1)]),(0,n._)("tr",null,[la,(0,n._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_week)),1)]),(0,n._)("tr",null,[ha,(0,n._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_month)),1)]),(0,n._)("tr",null,[ca,(0,n._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_year)),1)]),(0,n._)("tr",null,[ua,(0,n._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_total)),1)])])])}function ga(t,e=" giờ",a=" phút",s=!1){t||(t=0);let n=s?"<br />":" ";if(t<60)return n+t+a;let i=Math.floor(t/60),r=t%60;return 0==r?i+e:i+e+n+r+a}var ma={name:"UserProfile",props:{userData:{type:Object}},created(){this.userData?this.user=this.userData:(this.user=this.$store.state.user,this.auth=!0)},data(){return{user:{},auth:!1}},methods:{convertTimestampToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})},getAvatarURL(){return X.getAvatarURL(this.user.username)},caculateTime(t){return ga(t)}}};const pa=(0,U.Z)(ma,[["render",da],["__scopeId","data-v-b3abf8d0"]]);var ya=pa;const wa=t=>((0,n.dD)("data-v-3fff74c0"),t=t(),(0,n.Cn)(),t),_a={class:"text-center"},fa={class:"date"},va={class:"mr-2"},Da={key:0},ka=(0,n.Uk)(" Bạn đã học "),ba=(0,n.Uk)(" trong tháng này "),Ta={key:1},La={class:"color-help"},Ma={class:"color-help"},Ia={style:{"max-width":"100%","overflow-x":"scroll"}},Sa=wa((()=>(0,n._)("tr",null,[(0,n._)("th",{title:"Tổng thời gian học của tuần"},"Week"),(0,n._)("th",null,"Sun"),(0,n._)("th",null,"Mon"),(0,n._)("th",null,"Tue"),(0,n._)("th",null,"Wed"),(0,n._)("th",null,"Thu"),(0,n._)("th",null,"Fri"),(0,n._)("th",null,"Sat")],-1))),Ca={key:0},Ua={class:"text-secondary"},Pa=["innerHTML"],xa=wa((()=>(0,n._)("br",null,null,-1))),Va=wa((()=>(0,n._)("br",null,null,-1))),za=["title","onClick"],Na={key:1,class:"text-secondary mt-1"},Ea=["innerHTML"],ja=wa((()=>(0,n._)("hr",null,null,-1))),Oa={key:2},Aa=wa((()=>(0,n._)("br",null,null,-1))),Wa=wa((()=>(0,n._)("br",null,null,-1))),Ka=wa((()=>(0,n._)("br",null,null,-1))),Ha=[Aa,Wa,Ka],qa={style:{"margin-bottom":"7rem"}},Ba={class:"mb-4"},Ra=wa((()=>(0,n._)("hr",null,null,-1))),Fa={key:0,style:{"margin-bottom":"40vh"}},$a={class:"ml-3"},Za={key:0},Ya=(0,n.Uk)(" Đã học: "),Ga=(0,n.Uk)(" trong môn "),Ja={key:1},Xa=(0,n.Uk)(" Đã học: "),Qa=(0,n.Uk)("Bắt đầu: "),ts=(0,n.Uk)("Kết thúc: "),es=wa((()=>(0,n._)("br",null,null,-1))),as=wa((()=>(0,n._)("hr",null,null,-1))),ss=wa((()=>(0,n._)("br",null,null,-1)));function ns(t,e,a,r,o,l){const h=(0,n.up)("router-link"),c=(0,n.up)("MarkdownViewer");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",_a,[(0,n._)("div",fa,[(0,n._)("p",va,"Tháng "+(0,i.zw)(o.month),1),(0,n._)("p",null,"Năm "+(0,i.zw)(o.year),1)]),this.timeMonth>0?((0,n.wg)(),(0,n.iD)("p",Da,[ka,(0,n._)("b",null,(0,i.zw)((this.timeMonth/60).toFixed(2))+" giờ ("+(0,i.zw)(this.timeMonth)+" phút) ",1),ba])):((0,n.wg)(),(0,n.iD)("p",Ta," Chưa có dữ liệu thống kê cho tháng này ")),(0,n._)("div",null,[(0,n._)("span",{onClick:e[0]||(e[0]=t=>l.toBeforeMonth()),class:"material-icons btn-icon mr-2"},"navigate_before"),(0,n.wy)((0,n._)("input",{type:"month","onUpdate:modelValue":e[1]||(e[1]=t=>o.date=t),class:"mb-4",style:{display:"inline-block",position:"relative",top:"-5px"}},null,512),[[s.nr,o.date]]),(0,n._)("span",{onClick:e[2]||(e[2]=t=>l.toNextMonth()),class:"material-icons btn-icon ml-2"},"navigate_next")]),(0,n._)("div",La,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.styleColors.day,((t,e)=>((0,n.wg)(),(0,n.iD)("span",{key:e,style:(0,i.j5)({backgroundColor:t})},null,4)))),128))]),(0,n._)("div",Ma,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.styleColors.weekday,((t,e)=>((0,n.wg)(),(0,n.iD)("span",{key:e,style:(0,i.j5)({backgroundColor:t})},null,4)))),128))])]),(0,n._)("div",Ia,[(0,n._)("table",null,[Sa,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.diaries.data,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[(0,n._)("td",null,[""!=o.diaries.timeWeek[e]?((0,n.wg)(),(0,n.iD)("div",Ca,[(0,n._)("p",{style:(0,i.j5)(l.weekStyle(o.diaries.timeWeek[e]))}," Tuần "+(0,i.zw)(e+1),5),(0,n._)("span",Ua,[(0,n._)("span",{style:{"white-space":"nowrap"},innerHTML:l.caculateTime(o.diaries.timeWeek[e],"h","'",!0)},null,8,Pa)]),xa,Va])):(0,n.kq)("",!0)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t,((t,a)=>((0,n.wg)(),(0,n.iD)("td",{key:a},[""!=t.day?((0,n.wg)(),(0,n.iD)("p",{key:0,title:"Ngày "+t.day,onClick:s=>l.setShowDay(e,a,t.day),style:(0,i.j5)(l.dayStyle(t))},(0,i.zw)(t.day),13,za)):(0,n.kq)("",!0),"string"==typeof t.time||"number"==typeof t.time?((0,n.wg)(),(0,n.iD)("div",Na,[(0,n._)("span",{style:{"white-space":"nowrap"},innerHTML:l.caculateTime(t.time,"h","'",!0)},null,8,Ea),ja])):((0,n.wg)(),(0,n.iD)("div",Oa,Ha))])))),128))])))),128))])]),(0,n._)("div",qa,[(0,n._)("h2",Ba,(0,i.zw)(o.showDay.title)+" - "+(0,i.zw)(o.showDay.diary.length)+" diary",1),Ra,0==o.showDay.diary.length?((0,n.wg)(),(0,n.iD)("div",Fa," Bạn không học gì vào ngày này ")):((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(o.showDay.diary,(t=>((0,n.wg)(),(0,n.iD)("div",{key:"diary_"+t.id},[(0,n._)("div",$a,[0==a.tag?((0,n.wg)(),(0,n.iD)("p",Za,[Ya,(0,n._)("b",null,(0,i.zw)(l.caculateTime(t.time)),1),Ga,(0,n._)("b",null,[(0,n.Wm)(h,{to:"/study-diary/"+t.sdtag},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.name),1)])),_:2},1032,["to"])])])):((0,n.wg)(),(0,n.iD)("p",Ja,[Xa,(0,n._)("b",null,(0,i.zw)(l.caculateTime(t.time)),1)])),(0,n._)("p",null,[Qa,(0,n._)("b",null,(0,i.zw)(new Date(t.start_at).toLocaleString("vi-VN")),1)]),(0,n._)("p",null,[ts,(0,n._)("b",null,(0,i.zw)(new Date(t.stop_at).toLocaleString("vi-VN")),1)]),(0,n.Wm)(c,{class:"quote",content:t.log},null,8,["content"])]),es,as,ss])))),128))])])}const is={ref:"viewer"};function rs(t,e,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",is,null,512)}var os=a(8463),ls=a.n(os),hs=a(8212),cs=a.n(hs),us=a(187),ds=a.n(us),gs=a(3617),ms=a.n(gs);const ps=["style","script"],ys=["style","id"];function ws(t){return ms().sanitize(t,{FORBID_TAGS:ps,FORBID_ATTR:ys})}var _s={name:"MarkdownViewer",props:{content:{type:String,required:!0}},mounted(){this.viewer=new(ls())({el:this.$refs.viewer,height:"auto",initialValue:this.content,customHTMLSanitizer:ws,plugins:[[cs(),{highlighter:ds()}]]})}};const fs=(0,U.Z)(_s,[["render",rs]]);var vs=fs,Ds={name:"ContributionDiary",components:{MarkdownViewer:vs},props:{userID:{type:Number,default:0},tag:{type:Number,default:0},refeshToogle:{type:Boolean,default:!1},timeToday:{type:Number,default:0}},created(){this.adjustDate()},data(){return{diaries:[],showDay:{title:"Hôm nay",day:0,diary:[]},month:this.$route.query.month||(new Date).getMonth()+1,year:this.$route.query.year||(new Date).getFullYear(),date:"",timeMonth:0,styleColors:{day:["#ffffff","#ccffed","#7fffd2","#2bd89e","#08a56e","#007f52","#00593a","#003321"],weekday:["#f8efff","#e9ccff","#d499ff","#b14cff","#801ecc","#52078c","#2b004c"]}}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),async getDiaries(){let t="/study-diary/diary/",e=this.userID||this.user.id;if(0!=this.tag?t+=`${e}/${this.year}/${this.month}/${this.tag}`:t+=`${e}/${this.year}/${this.month}`,!this.loadSessionData(t)){this.setIsLoading(!0);let e=await X.get(t),a=await e.json();if(this.setIsLoading(!1),200!=e.status)throw new Error(a.error);this.showDay.diary=[],this.putDiary(a.data.diaries,a.data.times),this.saveSessionData(t,a.data)}},putDiary(t,e){let a=[[],[],[],[],[],[],[]],s={timeWeek:["","","","","",""],data:[[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],a]},n=t.length>0?new Date(t[0].stop_at):new Date(this.year,this.month-1,1),i=new Date(n.getFullYear(),n.getMonth(),1).getDay(),r=new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),o=1;for(let u=0;u<s.data.length;u++)for(let t=0;t<s.data[u].length;t++){let e=o-i;if(e>0&&e<=r){let a=!1;this.month==(new Date).getMonth()+1&&this.year==(new Date).getFullYear()&&(new Date).getDate()==e&&(a=!0),s.data[u][t]={day:e,isActive:!1,time:null,diary:[],isToday:a}}else s.data[u][t]={day:"",diary:[]};o++}let l=0,h=0,c=(new Date).getDate();t&&t.forEach((t=>{let e=new Date(t.stop_at),a=e.getDate(),n=e.getDay(),i=new Date(e.getFullYear(),e.getMonth(),1).getDay(),r=Math.ceil((a+i)/7)-1;s.data[r][n].diary.push(t),e.toDateString()==(new Date).toDateString()&&(l=r,h=n,c=a)})),this.timeMonth=0,e&&this.putTimes(s,e),this.diaries=s,this.setShowDay(l,h,c)},putTimes(t,e){e.forEach((e=>{let a=new Date(e.created_at),s=a.getDate(),n=a.getDay(),i=new Date(a.getFullYear(),a.getMonth(),1).getDay(),r=Math.ceil((s+i)/7)-1;0==e.type?t.data[r][n].time=e.time:1==e.type?t.timeWeek[r]=e.time:2==e.type&&(this.timeMonth=e.time)}))},caculateTime(t,e,a,s){return ga(t,e,a,s)},setShowDay(t,e,a){this.showDay.diary=this.diaries.data[t][e].diary,this.showDay.day=a,this.showDay.title=`${a}/${this.month}/${this.year}`;for(let s=0;s<this.diaries.data.length;s++)for(let t=0;t<this.diaries.data[s].length;t++)this.diaries.data[s][t].isActive=!1;this.diaries.data[t][e].isActive=!0},dayStyle(t){let e={backgroundColor:"#ffffff",outline:t.isActive?"3px dashed #ff907f":"none",boxShadow:t.isToday?"3px 3px 1px #ff90ff":"none",color:"#000000"},a=0;return t.isToday?a=s(this.timeToday):null!==t.time&&(a=s(t.time)),e.backgroundColor=this.styleColors.day[a],a>4&&(e.color="#ffffff"),e;function s(t){let e=Math.floor(t/60),a=0;return t<=0||(a=t>0&&e<2?1:e<4?2:e<6?3:e<8?4:e<10?5:e<12?6:7),a}},weekStyle(t){let e={backgroundColor:"#fff",color:"#000",cursor:"default",padding:".5rem .25rem"},a=Math.floor(t/60),s=0;return s=a<=12?0:a<=24?1:a<=36?2:a<=48?3:a<=60?4:a<=72?5:6,e.backgroundColor=this.styleColors.weekday[s],s>3&&(e.color="#ffffff"),e},saveSessionData(t,e){sessionStorage.setItem(t,JSON.stringify(e))},loadSessionData(t){let e=sessionStorage.getItem(t);if(!e)return!1;let a=JSON.parse(e);return this.showDay.diary=[],this.putDiary(a.diaries,a.times),!0},toNextMonth(){this.month++,this.month>12&&(this.month=1,this.year++),this.adjustDate()},toBeforeMonth(){this.month--,this.month<1&&(this.month=12,this.year--),this.adjustDate()},formatMonth(t){return t=String(t),t.length>1?t:"0"+t},adjustDate(t,e){t=t||this.month,e=e||this.year;let a=e+"-"+this.formatMonth(t);this.date=a}},watch:{refeshToogle:{handler(){this.getDiaries()},deep:!0},date:{handler(t){let e=t.split("-");this.year=e[0],this.month=e[1],this.getDiaries()}}}};const ks=(0,U.Z)(Ds,[["render",ns],["__scopeId","data-v-3fff74c0"]]);var bs=ks,Ts={name:"ProfileView",components:{Profile:ya,ContributionDiary:bs},data(){return{}},methods:{}};const Ls=(0,U.Z)(Ts,[["render",Ge]]);var Ms=Ls;const Is={class:"container container-sm"},Ss={class:"breadcrumb"},Cs=(0,n.Uk)("Cá Nhân"),Us=(0,n.Uk)("Sửa Thông Tin Cá Nhân"),Ps=["src","alt"],xs=(0,n._)("br",null,null,-1),Vs=(0,n._)("p",null,"Cập nhật ảnh đại diện",-1),zs={class:"input"},Ns=(0,n._)("button",{class:"btn btn-primary"},[(0,n._)("span",{class:"material-icons mr-2"},"file_upload"),(0,n.Uk)(" Upload ")],-1),Es=(0,n._)("hr",null,null,-1),js=(0,n._)("p",null,"Cập nhật thông tin cá nhân",-1),Os={class:"input"},As=(0,n._)("span",{class:"material-icons"},"label",-1),Ws=(0,n._)("p",null,"Tên hiển thị",-1),Ks={class:"d-flex align-items-center"},Hs=(0,n._)("span",{class:"material-icons mr-2 ml-2",style:{color:"#ff907f"}},"palette",-1),qs=(0,n._)("small",{class:"ml-3 text-secondary"},"Màu hiển thị",-1),Bs={class:"input"},Rs=(0,n._)("span",{class:"material-icons"},"favorite",-1),Fs=(0,n._)("p",null,"Châm ngôn",-1),$s=(0,n._)("button",{class:"btn btn-primary"},[(0,n._)("span",{class:"material-icons mr-2"},"save"),(0,n.Uk)(" Save ")],-1),Zs=(0,n._)("hr",null,null,-1),Ys=(0,n._)("p",null,"Cập nhật mật khẩu",-1),Gs={class:"input"},Js=(0,n._)("span",{class:"material-icons"},"lock",-1),Xs=(0,n._)("p",null,"Mật khẩu cũ",-1),Qs={class:"input"},tn=(0,n._)("span",{class:"material-icons"},"lock",-1),en=(0,n._)("p",null,"Mật khẩu mới",-1),an={class:"input"},sn=(0,n._)("span",{class:"material-icons"},"lock",-1),nn=(0,n._)("p",null,"Xác nhận mật khẩu",-1),rn=(0,n._)("button",{class:"btn btn-primary"},[(0,n._)("span",{class:"material-icons mr-2"},"save"),(0,n.Uk)(" Save ")],-1);function on(t,e,a,i,r,o){const l=(0,n.up)("router-link"),h=(0,n.up)("message-popup");return(0,n.wg)(),(0,n.iD)("div",Is,[(0,n._)("div",Ss,[(0,n.Wm)(l,{to:"/profile"},{default:(0,n.w5)((()=>[Cs])),_:1}),(0,n.Wm)(l,{to:"/profile/edit"},{default:(0,n.w5)((()=>[Us])),_:1})]),(0,n._)("form",{action:"",onSubmit:e[1]||(e[1]=(0,s.iM)((t=>o.updateAvatar()),["prevent"]))},[(0,n._)("img",{src:r.avatarPreview,alt:t.user.username,class:"d-block mx-auto avatar-xl"},null,8,Ps),xs,Vs,(0,n._)("label",zs,[(0,n._)("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>o.onchangeAvatar&&o.onchangeAvatar(...t))},null,32)]),Ns],32),Es,(0,n._)("form",{action:"",onSubmit:e[5]||(e[5]=(0,s.iM)((t=>o.startUpdateProfile()),["prevent"]))},[js,(0,n._)("label",Os,[As,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.name=t),placeholder:"Tên hiển thị"},null,512),[[s.nr,r.form.name]]),Ws]),(0,n._)("label",Ks,[Hs,(0,n.wy)((0,n._)("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=t=>r.form.color=t)},null,512),[[s.nr,r.form.color]]),qs]),(0,n._)("label",Bs,[Rs,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>r.form.slogan=t),placeholder:"Châm ngôn"},null,512),[[s.nr,r.form.slogan]]),Fs]),$s],32),Zs,(0,n._)("form",{action:"",onSubmit:e[9]||(e[9]=(0,s.iM)((t=>o.startUpdatePassword()),["prevent"]))},[Ys,(0,n._)("label",Gs,[Js,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=t=>r.passwordForm.oldPassword=t),placeholder:"Mật khẩu cũ"},null,512),[[s.nr,r.passwordForm.oldPassword]]),Xs]),(0,n._)("label",Qs,[tn,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=t=>r.passwordForm.newPassword=t),placeholder:"Mật khẩu mới"},null,512),[[s.nr,r.passwordForm.newPassword]]),en]),(0,n._)("label",an,[sn,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":e[8]||(e[8]=t=>r.rePassword=t),placeholder:"Xác nhận mật khẩu"},null,512),[[s.nr,r.rePassword]]),nn]),rn],32),(0,n.Wm)(h,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}var ln={name:"EditProfileView",components:{MessagePopup:He},data(){return{form:{name:this.getUserName(),slogan:this.getUserSlogan(),color:this.getUserColor()},passwordForm:{oldPassword:"",newPassword:""},rePassword:"",avatarPreview:X.getAvatarURL(this.getUserUsername()),avatarFile:null,isLoading:!1,message:{title:"",message:"",type:"",isDisplay:!1}}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),...(0,l.nv)(["updateProfile","updatePassword"]),...(0,l.Se)(["getUserName","getUserSlogan","getUserUsername","getUserColor"]),updateAvatar(){if(!this.avatarFile)return void this.showMessage("Lỗi","Vui lòng chọn ảnh đại diện","error");let t=new FormData;t.append("avatar",this.avatarFile),this.setIsLoading(!0),X.updateAvatar(t).then((t=>{200==t.status?location.reload():(this.setIsLoading(!1),this.showMessage("Lỗi!","Có lỗi xảy ra, vui lòng thử lại","error"))})).catch((t=>{this.setIsLoading(!1),console.log(t),this.showMessage("Lỗi!","Không thể kết nối đến máy chủ","error")}))},async startUpdateProfile(){if(!this.form.name||!this.form.slogan)return void this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning");let t;try{t=await this.updateProfile(this.form)}catch(e){console.log(e.message);let t="";t="Invalid name"==e.message?"Tên hiển thị phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",t,"error")}t&&this.showMessage("Thành công","Cập nhật thông tin thành công","success")},async startUpdatePassword(){if(this.passwordForm.oldPassword&&this.passwordForm.newPassword)if(this.passwordForm.newPassword==this.rePassword)try{if(!await this.updatePassword(this.passwordForm))return;this.showMessage("Thành công","Cập nhật mật khẩu thành công","success"),this.$router.push("/profile")}catch(t){console.log(t.message);let e="";e="Invalid password"==t.message?"Mật khẩu phải từ 6 kí tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt":"Old password is incorrect"==t.message?"Mật khẩu cũ không chính xác":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",e,"error")}else this.showMessage("Lỗi","Mật khẩu mới và xác nhận mật khẩu không khớp","warning");else this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning")},onchangeAvatar(t){let e=t.target.files||t.dataTransfer.files;e.length&&this.convertAvatar(e[0])},convertAvatar(t){let e=document.createElement("canvas"),a=e.getContext("2d"),s=document.createElement("img"),n=256;e.width=n,e.height=n,s.src=URL.createObjectURL(t),s.onload=()=>{if(URL.revokeObjectURL(s.src),s.width>s.height){let t=s.height/n,e=s.width/t,i=e/2-n/2;a.drawImage(s,-i,0,e,n)}else{let t=s.width/n,e=s.height/t,i=e/2-n/2;a.drawImage(s,0,-i,n,e)}this.avatarPreview=e.toDataURL(),fetch(this.avatarPreview).then((t=>{t.arrayBuffer().then((t=>{this.avatarFile=new File([t],"avatar",{type:"image/png"})}))}))}},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay}}};const hn=(0,U.Z)(ln,[["render",on]]);var cn=hn,un=[{path:"/profile",name:"profile",component:Ms,meta:{title:"Thông Tin Cá Nhân - MTLKMS"}},{path:"/profile/edit",name:"edit-profile",component:cn,meta:{title:"Chỉnh Sửa Thông Tin Cá Nhân - MTLKMS"}}];const dn=t=>((0,n.dD)("data-v-63e1c256"),t=t(),(0,n.Cn)(),t),gn={class:"container"},mn=dn((()=>(0,n._)("h3",null,"Đang học",-1))),pn={key:0},yn={key:1,class:"grid-list"},wn={class:"title"},_n={class:"material-icons mr-2"},fn=dn((()=>(0,n._)("div",null,[(0,n._)("button",null,[(0,n._)("span",{class:"material-icons"},"edit")]),(0,n._)("button",null,[(0,n._)("span",{class:"material-icons"},"delete_forever")])],-1))),vn={class:"body"},Dn={class:"d-flex justify-space-between align-items-center"},kn=dn((()=>(0,n._)("h3",null,"Thẻ Lĩnh Vực",-1))),bn=dn((()=>(0,n._)("span",{class:"material-icons mr-2"},"add",-1))),Tn=(0,n.Uk)(" Thêm "),Ln=[bn,Tn],Mn={key:2},In={key:3,class:"grid-list"},Sn={class:"title"},Cn={class:"material-icons mr-2"},Un=["onClick"],Pn=dn((()=>(0,n._)("span",{class:"material-icons"},"edit",-1))),xn=[Pn],Vn=["onClick"],zn=dn((()=>(0,n._)("span",{class:"material-icons"},"delete_forever",-1))),Nn=[zn],En={class:"body"},jn={class:"popup"},On={class:"container container-sm"},An={class:"d-flex justify-content-center align-items-center"},Wn=dn((()=>(0,n._)("span",{class:"material-icons mr-2"},"edit",-1))),Kn=dn((()=>(0,n._)("p",null,"Preview: ",-1))),Hn={class:"title"},qn={class:"d-flex align-items-center"},Bn={class:"material-icons mr-2"},Rn={class:"body"},Fn=dn((()=>(0,n._)("br",null,null,-1))),$n=dn((()=>(0,n._)("hr",null,null,-1))),Zn={class:"mb-3 mt-3"},Yn={class:"mr-3"},Gn=dn((()=>(0,n._)("span",{class:"mr-3"},"Màu nền",-1))),Jn=dn((()=>(0,n._)("span",{class:"mr-3"},"Màu chữ",-1))),Xn=dn((()=>(0,n._)("hr",null,null,-1))),Qn={class:"mt-3 mb-3"},ti=dn((()=>(0,n._)("p",null,"Icon: ",-1))),ei=["onClick"],ai=dn((()=>(0,n._)("hr",null,null,-1))),si={class:"mt-3 mb-4"},ni=dn((()=>(0,n._)("p",null,"Tên: ",-1))),ii={class:"input"},ri=dn((()=>(0,n._)("span",{class:"material-icons"},"tag",-1))),oi=dn((()=>(0,n._)("p",null,"Tên thẻ",-1))),li=dn((()=>(0,n._)("button",{class:"btn btn-primary"},[(0,n._)("span",{class:"material-icons mr-2"},"save"),(0,n.Uk)(" Lưu ")],-1))),hi={class:"popup"},ci={class:"container container-sm"},ui={class:"d-flex justify-content-center align-items-center"},di=dn((()=>(0,n._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),gi=(0,n.Uk)("Bạn có chắc muốn xóa thẻ "),mi=(0,n.Uk)(" không?"),pi=dn((()=>(0,n._)("p",null,"Hành động xóa thẻ này cũng sẽ xóa toàn bộ nhật ký và thống kê của thẻ này vĩnh viễn.",-1))),yi={class:"mt-3 mb-3"},wi=dn((()=>(0,n._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),_i=(0,n.Uk)(" Xóa "),fi=[wi,_i];function vi(t,e,a,r,o,l){const h=(0,n.up)("router-link"),c=(0,n.up)("MessagePopup");return(0,n.wg)(),(0,n.iD)("div",gn,[mn,0==o.learningTags.length?((0,n.wg)(),(0,n.iD)("div",pn," Bạn hiện chưa học gì ")):((0,n.wg)(),(0,n.iD)("div",yn,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.learningTags,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:e},[(0,n._)("div",{class:"grid-item",style:(0,i.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,n._)("div",wn,[(0,n.Wm)(h,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,n.w5)((()=>[(0,n._)("span",_n,(0,i.zw)(t.icon),1),(0,n._)("b",null,(0,i.zw)(t.name),1)])),_:2},1032,["to","id"]),fn]),(0,n._)("div",vn,[(0,n._)("p",null,"Hôm nay: "+(0,i.zw)(l.formatTime(t.time_today)),1),(0,n._)("p",null,"Tuần này: "+(0,i.zw)(l.formatTime(t.time_week)),1),(0,n._)("p",null,"Tháng này: "+(0,i.zw)(l.formatTime(t.time_month)),1),(0,n._)("p",null,"Năm nay: "+(0,i.zw)(l.formatTime(t.time_year)),1),(0,n._)("p",null,"Tổng thời gian học: "+(0,i.zw)(l.formatTime(t.time_total)),1)])],4)])))),128))])),(0,n._)("div",Dn,[kn,(0,n._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>l.openCreateTagPopup&&l.openCreateTagPopup(...t))},Ln)]),0==o.tags.length?((0,n.wg)(),(0,n.iD)("div",Mn," Bạn chưa tạo thẻ nào ")):((0,n.wg)(),(0,n.iD)("div",In,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.tags,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:e},[(0,n._)("div",{class:"grid-item",style:(0,i.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,n._)("div",Sn,[(0,n.Wm)(h,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,n.w5)((()=>[(0,n._)("span",Cn,(0,i.zw)(t.icon),1),(0,n._)("b",null,(0,i.zw)(t.name),1)])),_:2},1032,["to","id"]),(0,n._)("div",null,[(0,n._)("button",{onClick:t=>l.openEditTagPopup(e)},xn,8,Un),(0,n._)("button",{onClick:t=>l.openDeleteTagPopup(e)},Nn,8,Vn)])]),(0,n._)("div",En,[(0,n._)("p",null,"Hôm nay: "+(0,i.zw)(l.formatTime(t.time_today)),1),(0,n._)("p",null,"Tuần này: "+(0,i.zw)(l.formatTime(t.time_week)),1),(0,n._)("p",null,"Tháng này: "+(0,i.zw)(l.formatTime(t.time_month)),1),(0,n._)("p",null,"Năm nay: "+(0,i.zw)(l.formatTime(t.time_year)),1),(0,n._)("p",null,"Tổng: "+(0,i.zw)(l.formatTime(t.time_total)),1)])],4)])))),128))])),(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",jn,[(0,n._)("div",{class:"popup-bg",onClick:e[1]||(e[1]=t=>o.editTagData.isDisplay=!1)}),(0,n._)("div",On,[(0,n._)("div",null,[(0,n._)("div",An,[Wn,(0,n._)("h3",null,(0,i.zw)(o.editTagData.title),1)]),(0,n._)("span",{class:"material-icons btn-close",onClick:e[2]||(e[2]=t=>o.editTagData.isDisplay=!1)},"close")]),(0,n._)("div",null,[Kn,(0,n._)("div",{class:"grid-item",style:(0,i.j5)({backgroundColor:o.editTagData.bgColor,color:o.editTagData.textColor})},[(0,n._)("div",Hn,[(0,n._)("span",qn,[(0,n._)("span",Bn,(0,i.zw)(o.editTagData.icon),1),(0,n._)("b",null,(0,i.zw)(o.editTagData.name),1)])]),(0,n._)("div",Rn,[(0,n._)("p",null,"Hôm nay: "+(0,i.zw)(l.formatTime(o.editTagData.times.today))+" giờ",1),(0,n._)("p",null,"Tuần này: "+(0,i.zw)(l.formatTime(o.editTagData.times.week))+" giờ",1),(0,n._)("p",null,"Tháng này: "+(0,i.zw)(l.formatTime(o.editTagData.times.month))+" giờ",1),(0,n._)("p",null,"Năm nay: "+(0,i.zw)(l.formatTime(o.editTagData.times.year))+" giờ",1),(0,n._)("p",null,"Tổng: "+(0,i.zw)(l.formatTime(o.editTagData.times.total))+" giờ",1)])],4),Fn,$n,(0,n._)("form",{action:"",onSubmit:e[6]||(e[6]=(0,s.iM)(((...t)=>l.submitEditTag&&l.submitEditTag(...t)),["prevent"]))},[(0,n._)("div",Zn,[(0,n._)("span",Yn,[Gn,(0,n.wy)((0,n._)("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=t=>o.editTagData.bgColor=t),required:""},null,512),[[s.nr,o.editTagData.bgColor]])]),(0,n._)("span",null,[Jn,(0,n.wy)((0,n._)("input",{type:"color","onUpdate:modelValue":e[4]||(e[4]=t=>o.editTagData.textColor=t),required:""},null,512),[[s.nr,o.editTagData.textColor]])])]),Xn,(0,n._)("div",Qn,[ti,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.icons,((t,e)=>((0,n.wg)(),(0,n.iD)("span",{key:e},[(0,n._)("span",{class:"material-icons btn-icon",onClick:e=>o.editTagData.icon=t},(0,i.zw)(t),9,ei)])))),128))]),ai,(0,n._)("div",si,[ni,(0,n._)("label",ii,[ri,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>o.editTagData.name=t),placeholder:"Tên thẻ",required:""},null,512),[[s.nr,o.editTagData.name]]),oi])]),li],32)])])],512),[[s.F8,o.editTagData.isDisplay]])])),_:1}),(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",hi,[(0,n._)("div",{class:"popup-bg",onClick:e[7]||(e[7]=t=>o.deleteTagData.isDisplay=!1)}),(0,n._)("div",ci,[(0,n._)("div",null,[(0,n._)("div",ui,[di,(0,n._)("h3",null,(0,i.zw)(o.deleteTagData.title),1)]),(0,n._)("span",{class:"material-icons btn-close",onClick:e[8]||(e[8]=t=>o.deleteTagData.isDisplay=!1)},"close")]),(0,n._)("div",null,[(0,n._)("p",null,[gi,(0,n._)("b",null,(0,i.zw)(o.deleteTagData.name),1),mi]),pi,(0,n._)("div",yi,[(0,n._)("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...t)=>l.deleteTag&&l.deleteTag(...t))},fi)])])])],512),[[s.F8,o.deleteTagData.isDisplay]])])),_:1}),(0,n.Wm)(c,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])])}var Di={name:"SDListView",components:{MessagePopup:He},created(){this.loadSessionData()||this.getTags()},data(){return{tags:[],learningTags:[],editTagData:{title:"Sửa thẻ",index:0,id:0,icon:"",name:"",textColor:"",bgColor:"",times:{today:0,week:0,month:0,year:0,total:0},isDisplay:!1},deleteTagData:{title:"Xóa thẻ",isDisplay:!1,index:0,id:0,name:""},icons:["school","sports_esports","cake","self_improvement","water","nights_stay","sports_gymnastics","piano","music_note","movie","equalizer","shopping_cart","credit_card","receipt_long","attach_money","sell","work","calculate","edit_notifications","mail","notifications","hub","smartphone","print","computer","desktop_windows","headphones","smart_toy","keyboard","memory","menu_book","star","library_books","auto_stories","local_library","import_contacts","sticky_note_2","note","laptop_chromebook","style","edit","construction","draw","mic","palette","code","terminal","data_object","data_array"],message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{...(0,l.OI)(["setIsLoading"]),getTags(){this.setIsLoading(!0),X.get("/study-diary/"+this.user.id).then((t=>{this.setIsLoading(!1),200===t.status?t.json().then((t=>{this.learningDiary?t.data.forEach((t=>{t.id==this.learningDiary.diary.sdtag?this.learningTags.push(t):this.tags.push(t)})):this.tags=t.data,this.saveSessionData()})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Không thể lấy dữ liệu","error")}))})).catch((t=>{console.log(t),this.setIsLoading(!1),this.showMessage("Lỗi","Lỗi kết nối đến server","error")}))},openCreateTagPopup(){this.editTagData.title="Tạo thẻ",this.editTagData.id=0,this.editTagData.icon="star",this.editTagData.name="New Tag",this.editTagData.textColor="#000000",this.editTagData.bgColor="#ffa799",this.editTagData.times={today:0,week:0,month:0,year:0,total:0},this.editTagData.isDisplay=!0},openEditTagPopup(t){this.editTagData.title="Sửa thẻ "+this.tags[t].id,this.editTagData.index=t,this.editTagData.id=this.tags[t].id,this.editTagData.icon=this.tags[t].icon,this.editTagData.name=this.tags[t].name,this.editTagData.textColor=this.tags[t].text_color,this.editTagData.bgColor=this.tags[t].bg_color,this.editTagData.times.today=this.tags[t].time_today,this.editTagData.times.week=this.tags[t].time_week,this.editTagData.times.month=this.tags[t].time_month,this.editTagData.times.year=this.tags[t].time_year,this.editTagData.times.total=this.tags[t].time_total,this.editTagData.isDisplay=!0},openDeleteTagPopup(t){this.deleteTagData.title="Xóa thẻ",this.deleteTagData.index=t,this.deleteTagData.id=this.tags[t].id,this.deleteTagData.name=this.tags[t].name,this.deleteTagData.isDisplay=!0},submitEditTag(){0===this.editTagData.id?this.createTag():this.updateTag()},createTag(){this.setIsLoading(!0),X.post("/study-diary",{name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((t=>{this.tags.push(t.result),sessionStorage.clear(),this.saveSessionData(),this.showMessage("Thành công","Thêm thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Thêm thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},updateTag(){this.setIsLoading(!0),X.put("/study-diary",{id:this.editTagData.id,name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((t=>{this.tags[this.editTagData.index]=t.result,sessionStorage.clear(),this.saveSessionData(),this.showMessage("Thành công","Cập nhật thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Cập nhật thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},deleteTag(){this.setIsLoading(!0),X["delete"]("/study-diary",{id:this.deleteTagData.id}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((()=>{this.tags.splice(this.deleteTagData.index,1),sessionStorage.clear(),this.saveSessionData(),this.showMessage("Thành công","Xóa thẻ thành công","success"),this.deleteTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Xóa thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.deleteTagData.isDisplay=!1,console.log(t)}))},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},formatTime(t){return ga(t)},saveSessionData(){sessionStorage.setItem("tags",JSON.stringify({tags:this.tags,learningTags:this.learningTags}))},loadSessionData(){let t=sessionStorage.getItem("tags");if(t){let e=JSON.parse(t);return this.tags=e.tags,this.learningTags=e.learningTags,!0}return!1}},computed:{...(0,l.rn)(["learningDiary","user"])}};const ki=(0,U.Z)(Di,[["render",vi],["__scopeId","data-v-63e1c256"]]);var bi=ki;const Ti=t=>((0,n.dD)("data-v-1b59d28f"),t=t(),(0,n.Cn)(),t),Li={class:"container"},Mi={class:"breadcrumb"},Ii=(0,n.Uk)("Nhật Ký T.Gian Học"),Si={key:0},Ci=Ti((()=>(0,n._)("span",{class:"material-icons"},"stop",-1))),Ui=[Ci],Pi=(0,n.Uk)("Bắt đầu: "),xi=(0,n.Uk)("Đang học "),Vi=Ti((()=>(0,n._)("span",{class:"material-icons mr-2"},"pause",-1))),zi=(0,n.Uk)(" Tạm dừng "),Ni=[Vi,zi],Ei=Ti((()=>(0,n._)("span",{class:"material-icons mr-2"},"play_arrow",-1))),ji=(0,n.Uk)(" Tiếp tục "),Oi=[Ei,ji],Ai=Ti((()=>(0,n._)("span",{class:"material-icons"},"play_arrow",-1))),Wi=[Ai],Ki={class:"d-flex justify-content-center align-items-center"},Hi={class:"material-icons mr-2"},qi=Ti((()=>(0,n._)("td",null,"Hôm nay:",-1))),Bi=Ti((()=>(0,n._)("td",null,"Tuần:",-1))),Ri=Ti((()=>(0,n._)("td",null,"Tháng:",-1))),Fi=Ti((()=>(0,n._)("td",null,"Năm:",-1))),$i=Ti((()=>(0,n._)("td",null,"Tổng:",-1))),Zi={class:"popup"},Yi={class:"container container-md"},Gi=Ti((()=>(0,n._)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n._)("span",{class:"material-icons mr-2"},"delete_forever"),(0,n._)("h3",null,"Không học nữa à?")],-1))),Ji=Ti((()=>(0,n._)("p",null,"Bạn đã học được gì rồi? Viết xuống đây nhé!",-1))),Xi={class:"text-secondary"},Qi=(0,n.Uk)(" (Cú pháp viết chuẩn "),tr=(0,n.Uk)("Markdown"),er=(0,n.Uk)(") "),ar=Ti((()=>(0,n._)("span",{class:"material-icons"},"save",-1))),sr=(0,n.Uk)(" Lưu "),nr=[ar,sr],ir=Ti((()=>(0,n._)("h3",null,"Nhật Ký Học Tập",-1)));function rr(t,e,a,r,o,l){const h=(0,n.up)("router-link"),c=(0,n.up)("MarkdownEditor"),u=(0,n.up)("ContributionDiary"),d=(0,n.up)("MessagePopup");return(0,n.wg)(),(0,n.iD)("div",Li,[(0,n._)("div",Mi,[(0,n.Wm)(h,{to:"/users/"+o.tagData.username},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(o.tagData.username),1)])),_:1},8,["to"]),(0,n.Wm)(h,{to:"/study-diary"},{default:(0,n.w5)((()=>[Ii])),_:1}),(0,n.Wm)(h,{to:"/study-diary/"+o.tagData.id},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(o.tagData.name),1)])),_:1},8,["to"])]),(0,n._)("div",{class:"header mb-4",style:(0,i.j5)({backgroundColor:o.tagData.bg_color,color:o.tagData.text_color})},[(0,n._)("div",null,[0!==o.learningDiaryData.is_learning?((0,n.wg)(),(0,n.iD)("div",Si,[(0,n._)("div",{class:(0,i.C_)({icon:!0,active:l.isAuth}),onClick:e[0]||(e[0]=t=>l.showStopLearnPopup())},Ui,2),(0,n._)("p",null,[Pi,(0,n._)("b",null,(0,i.zw)(l.convertISOTimeToLocalDate(o.learningDiaryData.start_at)),1)]),(0,n._)("p",null,[xi,(0,n._)("b",null,(0,i.zw)(l.showStopwatchTime),1)]),(0,n._)("div",null,[1==o.learningDiaryData.is_learning?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"btn",onClick:e[1]||(e[1]=(...t)=>l.pauseLearn&&l.pauseLearn(...t))},Ni)):2==o.learningDiaryData.is_learning?((0,n.wg)(),(0,n.iD)("div",{key:1,class:"btn",onClick:e[2]||(e[2]=(...t)=>l.continueLearn&&l.continueLearn(...t))},Oi)):(0,n.kq)("",!0)])])):((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,i.C_)({icon:!0,active:l.isAuth}),onClick:e[3]||(e[3]=t=>l.startLearn())},Wi,2))]),(0,n._)("div",null,[(0,n._)("div",Ki,[(0,n._)("span",Hi,(0,i.zw)(o.tagData.icon),1),(0,n._)("h3",null,(0,i.zw)(o.tagData.name),1)]),(0,n._)("table",null,[(0,n._)("tr",null,[qi,(0,n._)("th",null,(0,i.zw)(l.formatTime(o.tagData.time_today)),1)]),(0,n._)("tr",null,[Bi,(0,n._)("th",null,(0,i.zw)(l.formatTime(o.tagData.time_week)),1)]),(0,n._)("tr",null,[Ri,(0,n._)("th",null,(0,i.zw)(l.formatTime(o.tagData.time_month)),1)]),(0,n._)("tr",null,[Fi,(0,n._)("th",null,(0,i.zw)(l.formatTime(o.tagData.time_year)),1)]),(0,n._)("tr",null,[$i,(0,n._)("th",null,(0,i.zw)(l.formatTime(o.tagData.time_total)),1)])])])],4),(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",Zi,[(0,n._)("div",{class:"popup-bg",onClick:e[4]||(e[4]=(...t)=>l.closeStopLearnPopup&&l.closeStopLearnPopup(...t))}),(0,n._)("div",Yi,[(0,n._)("div",null,[Gi,(0,n._)("span",{class:"material-icons btn-close",onClick:e[5]||(e[5]=(...t)=>l.closeStopLearnPopup&&l.closeStopLearnPopup(...t)),title:"Đóng và lưu bản nháp"}," close ")]),(0,n._)("div",null,[Ji,(0,n._)("p",Xi,[Qi,(0,n.Wm)(h,{to:"/guide/markdown"},{default:(0,n.w5)((()=>[tr])),_:1}),er]),(0,n.Wm)(c,{modelValue:o.stopLearnPopup.log,"onUpdate:modelValue":e[6]||(e[6]=t=>o.stopLearnPopup.log=t),initValue:o.stopLearnPopup.initValue},null,8,["modelValue","initValue"]),(0,n._)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=t=>l.stopLearn()),title:"Lưu và xóa bản nháp"},nr)])])],512),[[s.F8,o.stopLearnPopup.isDisplay]])])),_:1}),(0,n._)("div",null,[ir,0!=o.tagData.id?((0,n.wg)(),(0,n.j4)(u,{key:0,tag:o.tagData.id,userID:o.tagData.user,"refesh-toogle":o.refeshToggle,"time-today":o.tagData.time_today},null,8,["tag","userID","refesh-toogle","time-today"])):(0,n.kq)("",!0)]),(0,n.Wm)(d,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])])}const or={ref:"editor"};function lr(t,e,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",or,null,512)}var hr=a(6171),cr={name:"MarkdownEditor",props:{modelValue:{type:String,required:!1,default:""},initValue:{type:String,required:!1,default:""}},emits:["update:modelValue"],mounted(){const t=this.$refs.editor,e=new hr.ZP({el:t,height:"500px",hideModeSwitch:!0,previewHighlight:!0,customHTMLSanitizer:ws,initialValue:this.initValue,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task"],["table","image","link"],["code","codeblock"]],plugins:[[cs(),{highlighter:ds()}]],events:{change:()=>this.$emit("update:modelValue",e.getMarkdown())},hooks:{addImageBlobHook:this.addImageBlobHook}})},methods:{...(0,l.OI)(["setIsLoading"]),async addImageBlobHook(t,e){this.setIsLoading(!0);let a=new FormData;a.append("image",t);let s=await X.sendFormData("/user/upload-image",a),n=await s.json();if(this.setIsLoading(!1),200!==s.status)throw new Error(n.error);e(X.host+"/user/upload-image/"+this.$store.state.user.username+"/"+n.url)}}};const ur=(0,U.Z)(cr,[["render",lr]]);var dr=ur,gr={name:"SDTagView",created(){this.getTagData()},components:{MessagePopup:He,MarkdownEditor:dr,ContributionDiary:bs},data(){return{tagData:{id:0,name:"",bg_color:"inherit",text_color:"inherit",icon:"",time_today:0,time_week:0,time_month:0,time_year:0,time_total:0},learningDiaryData:{id:0,sdtag:0,user:0,log:"",is_learning:0,start_at:"",stop_at:""},stopLearnPopup:{isDisplay:!1,log:"",initValue:""},message:{title:"",message:"",type:"",isDisplay:!1},stopwatch:0,learnTimeSeconds:0,refeshToggle:!1}},methods:{...(0,l.OI)(["setTitle","setIsLoading","setLearningDiary"]),...(0,l.nv)(["getLearningDiary","checkLogin"]),async getTagData(){this.loadSessionData(this.$route.params.id)||await this.fetchTagData(),this.setTitle(this.tagData.name+" - "+this.tagData.username),this.isAuth&&this.learningDiary&&this.learningDiary.diary.sdtag==this.tagData.id?(this.learningDiaryData=this.learningDiary.diary,this.startStopwatch(this.learningDiary.timelogs)):await this.getLearningDiaryData()},async fetchTagData(){this.setIsLoading(!0);try{let t=await X.get("/study-diary/tag/"+this.$route.params.id),e=await t.json();if(200!=t.status)throw this.$router.push("/study-diary"),new Error(e.error);this.saveSessionData(e.data),this.tagData=e.data,this.setIsLoading(!1)}catch(t){throw this.setIsLoading(!1),this.$router.push("/study-diary"),t}},async getLearningDiaryData(){try{let t=await X.get("/study-diary/diary/status/"+this.tagData.id),e=await t.json();if(200!==t.status)throw new Error(e.error);this.learningDiaryData=e.data.diary,this.startStopwatch(e.data.timelogs)}catch(t){console.log(t)}},startLearn(){this.isAuth&&(this.learningDiary?this.showMessage("Lỗi","Bạn đang học môn khác rồi!","warning"):(this.setIsLoading(!0),X.post("/study-diary/diary",{sdtag:this.tagData.id}).then((t=>{this.setIsLoading(!1),t.json().then((e=>{if(200===t.status){let t=e.data;t.diary.name=this.tagData.name,this.learningDiaryData=t.diary,this.setLearningDiary(t),sessionStorage.clear(),this.startStopwatch(t.timelogs)}else console.log(e.error),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error")}))})).catch((t=>{console.log(t),this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ, vui lòng thử lại sau","error")}))))},async stopLearn(){if(0===this.stopLearnPopup.log.length)return void this.showMessage("Lỗi","Bạn chưa viết gì","warning");this.setIsLoading(!0);let t=await X.put("/study-diary/diary",{id:this.learningDiaryData.id,log:this.stopLearnPopup.log}),e=await t.json();if(200!==t.status)throw this.setIsLoading(!1),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"),this.setLearningDiary(!1),this.learningDiaryData.is_learning=2,new Error(e.error);this.setLearningDiary(!1),this.learningDiaryData.is_learning=0,this.stopLearnPopup.isDisplay=!1,this.stopLearnPopup.log="",this.tagData=e.data,sessionStorage.clear(),this.removeDiaryDraft(this.tagData.id),this.refeshToggle=!this.refeshToggle,this.showMessage("Thành công","Lưu thành công","success"),this.checkLogin()},async pauseLearn(){if(this.isAuth){this.setIsLoading(!0);try{let t=await X.post("/study-diary/diary/pause",{diaryID:this.learningDiaryData.id}),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.error);this.setLearningDiary(!1),this.learningDiaryData.is_learning=2}catch(t){this.setIsLoading(!1),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"),console.log("[SDTagView - pauseLearn]",t.message)}}},async continueLearn(){if(this.isAuth)if(this.learningDiary)this.showMessage("Lỗi","Bạn đang học môn khác rồi!","warning");else{this.setIsLoading(!0);try{let t=await X.post("/study-diary/diary/continue",{diaryID:this.learningDiaryData.id}),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.error);let a=e.data;a.diary.name=this.tagData.name,this.learningDiaryData=a.diary,this.setLearningDiary(a),sessionStorage.clear(),this.startStopwatch(a.timelogs)}catch(t){this.setIsLoading(!1),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"),console.log("[SDTagView - continueLearn]",t.message)}}},showStopLearnPopup(){this.isAuth&&(this.stopLearnPopup.isDisplay=!0)},closeStopLearnPopup(){this.stopLearnPopup.isDisplay=!1,this.saveDiaryDraft(this.stopLearnPopup.log)},formatTime(t){return ga(t)},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},convertISOTimeToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})},loopStopwatch(){1==this.learningDiaryData.is_learning&&setTimeout((()=>{this.stopwatch++,this.loopStopwatch()}),1e3)},startStopwatch(t){let e=0;t.forEach((t=>{let a=new Date(t.start_at),s=t.stop_at?new Date(t.stop_at):new Date,n=s-a,i=n/1e3;e+=i})),this.stopwatch=Math.round(e),this.loopStopwatch()},saveSessionData(t){sessionStorage.setItem("sdtag"+t.id,JSON.stringify(t))},loadSessionData(t){this.stopLearnPopup.initValue=this.loadDiaryDraft(t),this.stopLearnPopup.log=this.stopLearnPopup.initValue;let e=sessionStorage.getItem("sdtag"+t);if(e){let t=JSON.parse(e);return this.tagData=t,!0}return!1},saveDiaryDraft(t){localStorage.setItem(`sdtag-${this.tagData.id}_draft`,t)},loadDiaryDraft(t){let e=localStorage.getItem(`sdtag-${t}_draft`);return e||""},removeDiaryDraft(t){localStorage.removeItem(`sdtag-${t}_draft`)}},computed:{...(0,l.rn)(["learningDiary","user"]),showStopwatchTime(){let t=Math.floor(this.stopwatch/60),e=this.stopwatch%60,a=Math.floor(t/60);return t%=60,`${a} giờ ${t} phút ${e} giây`},isAuth(){return this.tagData.user==this.user.id}}};const mr=(0,U.Z)(gr,[["render",rr],["__scopeId","data-v-1b59d28f"]]);var pr=mr,yr=[{path:"/study-diary",name:"study-diary",component:bi,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}},{path:"/study-diary/:id",name:"study-diary-tag",component:pr,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}}];const wr={class:"container container-md grid"},_r=["src","alt"],fr={class:"ml-3"},vr={class:"text-secondary"};function Dr(t,e,a,s,r,o){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",wr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.users,((t,e)=>((0,n.wg)(),(0,n.j4)(l,{key:e,class:"user",to:"/users/"+t.username},{default:(0,n.w5)((()=>[(0,n._)("img",{src:o.getAvatarURL(t.username),alt:t.username+"-avatar",class:"avatar"},null,8,_r),(0,n._)("div",fr,[(0,n._)("p",null,[(0,n._)("b",{style:(0,i.j5)({color:t.color})},(0,i.zw)(t.name),5)]),(0,n._)("p",vr,(0,i.zw)(t.username),1)])])),_:2},1032,["to"])))),128))])}var kr={name:"UserListView",data(){return{}},created(){this.fetchUsers()},computed:{...(0,l.rn)(["users"])},methods:{...(0,l.nv)(["fetchUsers"]),async getUsersData(){try{await this.fetchUsers()}catch(t){console.log("[getUsersData - UserListView]",t)}},getAvatarURL(t){return X.getAvatarURL(t)}}};const br=(0,U.Z)(kr,[["render",Dr],["__scopeId","data-v-609d59cc"]]);var Tr=br;const Lr={key:0,class:"container container-md"},Mr=(0,n._)("hr",null,null,-1),Ir=(0,n._)("br",null,null,-1),Sr=(0,n._)("h3",{class:"mb-4"},"Nhật ký thời gian học",-1);function Cr(t,e,a,s,i,r){const o=(0,n.up)("ProfileComponent"),l=(0,n.up)("SDTagList"),h=(0,n.up)("ContributionDiary");return r.isUserLoaded()?((0,n.wg)(),(0,n.iD)("div",Lr,[(0,n.Wm)(o,{"user-data":i.user},null,8,["user-data"]),Mr,(0,n.Wm)(l,{userID:i.user.id},null,8,["userID"]),Ir,Sr,(0,n.Wm)(h,{userID:i.user.id,"time-today":Number(i.user.time_today)},null,8,["userID","time-today"])])):(0,n.kq)("",!0)}const Ur={class:"grid"},Pr={class:"material-icons mr-2"};function xr(t,e,a,s,r,o){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Ur,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.sdTags,((t,e)=>((0,n.wg)(),(0,n.j4)(l,{class:"tag",key:e,to:`/study-diary/${t.id}`,style:(0,i.j5)({backgroundColor:t.bg_color,color:t.text_color}),title:t.name},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("span",Pr,(0,i.zw)(t.icon),1),(0,n._)("b",null,(0,i.zw)(t.name),1)]),(0,n._)("div",null,(0,i.zw)(o.formatTime(t.time_total)),1)])),_:2},1032,["to","style","title"])))),128))])])}var Vr={name:"SDTagList",props:{userID:{type:Number,required:!0}},created(){this.loadSessionData()||this.getSDTags()},data(){return{sdTags:[]}},methods:{...(0,l.OI)(["setIsLoading"]),async getSDTags(){this.setIsLoading(!0);try{let t=await X.get("/study-diary/"+this.userID),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.message);this.sdTags=e.data,this.saveSessionData(e.data)}catch(t){this.setIsLoading(!1),console.error(t)}},saveSessionData(t){sessionStorage.setItem("sdTags"+this.userID,JSON.stringify(t))},loadSessionData(){return!!sessionStorage.getItem("sdTags"+this.userID)&&(this.sdTags=JSON.parse(sessionStorage.getItem("sdTags"+this.userID)),!0)},formatTime(t){return ga(t,"h","'")}}};const zr=(0,U.Z)(Vr,[["render",xr],["__scopeId","data-v-540724e4"]]);var Nr=zr,Er={name:"UserView",components:{ProfileComponent:ya,ContributionDiary:bs,SDTagList:Nr},data(){return{user:{}}},created(){this.getUserData()},computed:{...(0,l.rn)(["users"])},methods:{...(0,l.nv)(["fetchUsers"]),...(0,l.OI)(["setTitle"]),isUserLoaded(){return Object.keys(this.user).length>0},async getUserData(){await this.fetchUsers();let t=this.$route.params.username;this.users[t]?this.user=this.users[t]:location.href="/404",this.setTitle(this.user.name+" - Trang Cá Nhân - MTLKMS")}}};const jr=(0,U.Z)(Er,[["render",Cr]]);var Or=jr,Ar=[{path:"/users",name:"users",component:Tr,meta:{title:"Danh Sách Các Vịt - MTLKMS"}},{path:"/users/:username",name:"user",component:Or,meta:{title:"Thông Tin Cá Nhân - MTLKMS"}}];const Wr={class:"container container-sm"},Kr=(0,n._)("span",{class:"material-icons mr-2"},"edit_note",-1),Hr=(0,n.Uk)(" Hướng dẫn cú pháp Markdown (MD) ");function qr(t,e,a,s,i,r){const o=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",Wr,[(0,n.Wm)(o,{class:"link",to:"/guide/markdown"},{default:(0,n.w5)((()=>[Kr,Hr])),_:1})])}var Br={name:"GuideView"};const Rr=(0,U.Z)(Br,[["render",qr]]);var Fr=Rr;const $r={class:"container container-md"};function Zr(t,e,a,s,i,r){const o=(0,n.up)("MarkdownViewer");return(0,n.wg)(),(0,n.iD)("div",$r,[(0,n.Wm)(o,{content:i.content},null,8,["content"])])}let Yr="";Yr+="# Hướng dẫn cú pháp Markdown (MD)\n",Yr+="\n",Yr+="## Tiêu đề\n",Yr+="Trong markdown, để viết ra tiêu đề (Heading), ta đặt 1 (hoặc nhiều) dấu `#` ở đầu dòng, tùy theo phân cấp tiêu đề ta muốn viết.\n",Yr+="\n",Yr+="Tiêu đề cấp 1 là 1 dấu `#`, cấp 2 là 2 dấu `#`, cứ thế suy ra.\n",Yr+="\n",Yr+="*MD:*\n",Yr+="``` md\n",Yr+="# Heading 1  \n",Yr+="## Heading 2  \n",Yr+="### Heading 3  \n",Yr+="#### Heading 4\n",Yr+="```\n",Yr+="\n",Yr+="*Text:*\n",Yr+="> # Heading 1\n",Yr+="> ## Heading 2\n",Yr+="> ### Heading 3\n",Yr+="> #### Heading 4\n",Yr+="\n",Yr+="## Highlight\n",Yr+="Để in nghiêng, ta dùng dấu `*` bao quanh đoạn văn bản.  \n",Yr+="Để in đậm, ta dùng dấu `**` bao quanh đoạn văn bản.  \n",Yr+="Để vừa in nghiêng vừa bôi đậm, ta dùng dấu `***` bao quanh đoạn văn bản.\n",Yr+="\n",Yr+="Để viết inline code, ta dùng dấu ` bao quanh đoạn văn bản.  \n",Yr+="Để viết block code, ta đặt dấu ``` ở dòng đầu và dòng cuối đoạn văn bản.\n",Yr+="\n",Yr+="Ví dụ:\n",Yr+="\n",Yr+="*MD:*\n",Yr+="``` md\n",Yr+="*Đoạn văn bản in nghiêng*\n",Yr+="**Đoạn văn bản in đậm**\n",Yr+="***Đoạn văn bản vừa in nghiêng vừa bôi đậm***\n",Yr+="\n",Yr+="`Inline code`\n",Yr+="\n",Yr+="``` (language)\n",Yr+="Block code\n",Yr+="Block\n",Yr+="Code\n",Yr+="``` // End\n",Yr+="```\n",Yr+="\n",Yr+="*Text:*\n",Yr+="> *Đoạn văn bản in nghiêng*  \n",Yr+="> **Đoạn văn bản in đậm**  \n",Yr+="> ***Đoạn văn bản vừa in nghiêng vừa bôi đậm***  \n",Yr+="> \n",Yr+="> `Inline code`\n",Yr+="> \n",Yr+="> ``` md\n",Yr+="> Block code\n",Yr+="> Block\n",Yr+="> Code\n",Yr+="> ```\n",Yr+="\n",Yr+="## Link, Image\n",Yr+="### Link\n",Yr+="``` md\n",Yr+="// Link:\n",Yr+="[Text](url)\n",Yr+="\n",Yr+="// Example:\n",Yr+="[Click me](https://mtlkms.github.io)\n",Yr+="```\n",Yr+="\n",Yr+="> // Link  \n",Yr+="> [Text](url)\n",Yr+="> \n",Yr+="> // Example:  \n",Yr+="> [Click me](https://mtlkms.github.io)\n",Yr+="\n",Yr+="### Image\n",Yr+="``` md\n",Yr+="// Image:  \n",Yr+="![alt](url)\n",Yr+="\n",Yr+="// Example:  \n",Yr+="![cuikho210](https://vitcon.cf/user/cuikho210/avatar)\n",Yr+="```\n",Yr+="\n",Yr+="> // Image:  \n",Yr+="> ![alt](url)\n",Yr+="> \n",Yr+="> // Example:  \n",Yr+="> ![cuikho210](https://mtlkms.vitcon.cf/user/cuikho210/avatar)\n",Yr+="\n",Yr+="## List\n",Yr+="Để tạo danh sách dạng gạch đầu dòng, ta đặt dấu `* ` hoặc `- ` trước mỗi đầu dòng.  \n",Yr+="Để tạo danh sách dạng số thứ tự, ta đặt dấu `1. ` trước mỗi đầu dòng.  \n",Yr+="\n",Yr+="Ví dụ:\n",Yr+="\n",Yr+="``` md\n",Yr+="1. Item 1\n",Yr+="1. Item 2\n",Yr+="1. Item 3\n",Yr+="\n",Yr+="- Item 1\n",Yr+="- Item 2\n",Yr+="- Item 3\n",Yr+="\n",Yr+="* Item 1\n",Yr+="* Item 2\n",Yr+="* Item 3\n",Yr+="```\n",Yr+="\n",Yr+="> 1. Item 1\n",Yr+="> 1. Item 2\n",Yr+="> 1. Item 3\n",Yr+="> \n",Yr+="> - Item 1\n",Yr+="> - Item 2\n",Yr+="> - Item 3\n",Yr+="> \n",Yr+="> * Item 1\n",Yr+="> * Item 2\n",Yr+="> * Item 3\n",Yr+="\n",Yr+="## Xuống dòng\n",Yr+="Để xuống dòng, bạn chỉ cần viết 2 dấu cách liên tiếp ở cuối dòng\n",Yr+="\n",Yr+="Ví dụ: \n",Yr+="``` md\n",Yr+="Đây là dòng 1  \n",Yr+="Đây là dòng 2\n",Yr+="```\n",Yr+="\n",Yr+="> Đây là dòng 1  \n",Yr+="> Đây là dòng 2\n",Yr+="\n",Yr+="## Kẻ ngang dòng\n",Yr+="Để kẻ ngang dòng, bạn chỉ cần viết `***`\n",Yr+="\n",Yr+="Ví dụ: \n",Yr+="``` md\n",Yr+="Văn bản 1\n",Yr+="***\n",Yr+="Văn bản 2\n",Yr+="```\n",Yr+="> Văn bản 1\n",Yr+="> ***\n",Yr+="> Văn bản 2\n",Yr+="\n",Yr+="## Blockquote\n",Yr+="Để tạo 1 đoạn văn bản trích dẫn, ta đặt dấu `>` trước mỗi đầu dòng\n",Yr+="\n",Yr+="Ví dụ:\n",Yr+="``` md\n",Yr+="Trích dẫn:  \n",Yr+="> Vịt Chúa từng nói:  \n",Yr+="> Loài vịt chúng ta rất ngu, người ta chỉ cần cầm 1 con vịt đi phía trước là cả đàn vịt sẽ chạy theo sau.\n",Yr+="```\n",Yr+="\n",Yr+="> Trích dẫn:  \n",Yr+="> > Vịt Chúa từng nói:  \n",Yr+="> > Loài vịt chúng ta rất ngu, người ta chỉ cần cầm 1 con vịt đi phía trước là cả đàn vịt sẽ chạy theo sau.\n",Yr+="\n",Yr+="## Ngắt đoạn\n",Yr+="Để ngắt đoạn, chỉ cần viết 2 dấu xuống dòng liên tiếp\n",Yr+="\n",Yr+="Ví dụ:\n",Yr+="``` md\n",Yr+="Đây là đoạn 1  \n",Yr+="Đoạn 1 ngắn thế này thôi\n",Yr+="\n",Yr+="Đây là đoạn 2  \n",Yr+="Đoạn 2 ví dụ ngắt đoạn\n",Yr+="```\n",Yr+="\n",Yr+="> Đây là đoạn 1  \n",Yr+="> Đoạn 1 ngắn thế này thôi\n",Yr+="> \n",Yr+="> Đây là đoạn 2  \n",Yr+="> Đoạn 2 ví dụ ngắt đoạn\n";var Gr=Yr,Jr={name:"markdownGuideView",components:{MarkdownViewer:vs},data(){return{content:Gr}}};const Xr=(0,U.Z)(Jr,[["render",Zr]]);var Qr=Xr,to=[{path:"/guide",name:"guide",component:Fr,meta:{title:"Hướng Dẫn - MTLKMS"}},{path:"/guide/markdown",name:"guide-markdown",component:Qr,meta:{title:"Cú Pháp Markdown (MD) - MTLKMS"}}];const eo=t=>((0,n.dD)("data-v-b24dc9b4"),t=t(),(0,n.Cn)(),t),ao={class:"container container-md"},so=eo((()=>(0,n._)("h3",null,"Thông Con Báo",-1))),no={key:0,class:"notifi notifi-danger"},io=(0,n.Uk)(" Bạn đang học môn "),ro=eo((()=>(0,n._)("div",{class:"notifi notifi-success"},[(0,n.Uk)(" Thống kê ngày sẽ được tính vào lúc "),(0,n._)("b",null,"23:59:50 mỗi ngày"),(0,n.Uk)("! ")],-1))),oo=eo((()=>(0,n._)("div",{class:"notifi notifi-success"},[(0,n.Uk)(" Thống kê tuần sẽ được tính vào lúc "),(0,n._)("b",null,"23:59:50 mỗi thứ 7"),(0,n.Uk)("! ")],-1))),lo=eo((()=>(0,n._)("div",{class:"notifi notifi-success"},[(0,n.Uk)(" Ghi chú trong MTLKMS sử dụng cú pháp "),(0,n._)("b",null,"Markdown"),(0,n.Uk)(" (MD) ")],-1))),ho=eo((()=>(0,n._)("br",null,null,-1))),co=eo((()=>(0,n._)("h3",null,"Hoạt động mới",-1))),uo=eo((()=>(0,n._)("br",null,null,-1))),go={class:"d-flex align-items-center"},mo=["src","alt"],po={class:"ml-2"},yo=(0,n.Uk)(" vừa học "),wo=eo((()=>(0,n._)("br",null,null,-1))),_o=(0,n.Uk)(" trong môn "),fo=eo((()=>(0,n._)("br",null,null,-1))),vo={class:"tag"},Do=(0,n.Uk)(" Bắt đầu: "),ko=eo((()=>(0,n._)("br",null,null,-1))),bo=(0,n.Uk)(" Kết thúc: "),To=eo((()=>(0,n._)("br",null,null,-1))),Lo=eo((()=>(0,n._)("hr",null,null,-1))),Mo=eo((()=>(0,n._)("br",null,null,-1)));function Io(t,e,a,s,r,o){const l=(0,n.up)("router-link"),h=(0,n.up)("ChatBox"),c=(0,n.up)("MarkdownViewer"),u=(0,n.up)("RequestNotifi");return(0,n.wg)(),(0,n.iD)("div",ao,[(0,n._)("div",null,[so,t.learningDiary?((0,n.wg)(),(0,n.iD)("div",no,[io,(0,n.Wm)(l,{to:"/study-diary/"+t.learningDiary.diary.sdtag},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.learningDiary.diary.name),1)])),_:1},8,["to"])])):(0,n.kq)("",!0),ro,oo,lo]),ho,(0,n.Wm)(h),(0,n._)("div",null,[co,uo,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.diaries,(t=>((0,n.wg)(),(0,n.iD)("div",{key:"diary_"+t.id},[(0,n._)("div",go,[(0,n._)("img",{src:o.getAvatarURL(t.username),alt:t.user+" avatar",class:"avatar"},null,8,mo),(0,n._)("div",po,[(0,n.Wm)(l,{to:"/users/"+t.username},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.user),1)])),_:2},1032,["to"]),yo,(0,n._)("b",null,(0,i.zw)(o.caculateTime(t.time)),1),wo,_o,(0,n.Wm)(l,{to:"/study-diary/"+t.sdtag},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.name),1)])),_:2},1032,["to"]),fo,(0,n._)("div",vo,(0,i.zw)(o.caculatePassedTime(t.stop_at)),1)])]),(0,n._)("p",null,[Do,(0,n._)("b",null,(0,i.zw)(new Date(t.start_at).toLocaleString("vi-VN")),1),ko,bo,(0,n._)("b",null,(0,i.zw)(new Date(t.stop_at).toLocaleString("vi-VN")),1)]),(0,n.Wm)(c,{class:"quote",content:t.log},null,8,["content"]),To,Lo,Mo])))),128))]),(0,n.Wm)(u)])}const So=t=>((0,n.dD)("data-v-300e1ec4"),t=t(),(0,n.Cn)(),t),Co={class:"chat-container",ref:"chatbox"},Uo=["align"],Po=["src","alt"],xo=So((()=>(0,n._)("br",null,null,-1))),Vo={class:"text-secondary"},zo={class:"input"},No=So((()=>(0,n._)("span",{class:"material-icons"},"chat",-1))),Eo=So((()=>(0,n._)("button",{class:"btn"},[(0,n._)("span",{class:"material-icons"},"send")],-1)));function jo(t,e,a,r,o,l){const h=(0,n.up)("router-link"),c=(0,n.up)("message-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Co,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.chatMessages,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:"chat"+e},[(0,n._)("div",{align:l.isAuth(t.user.username)?"right":"left"},[(0,n._)("div",{class:(0,i.C_)({chatMsg:!0,chatMsgAuth:l.isAuth(t.user.username),chatMsgOther:!l.isAuth(t.user.username),loading:t.isLoading})},[(0,n._)("img",{src:l.getAvatarURL(t.user.username),alt:t.user.username,class:"avatar-sm"},null,8,Po),(0,n._)("div",null,[(0,n.Wm)(h,{to:"/users/"+t.user.username},{default:(0,n.w5)((()=>[(0,n._)("b",{style:(0,i.j5)({color:t.user.color})},(0,i.zw)(t.user.name),5)])),_:2},1032,["to"]),xo,(0,n._)("small",Vo,(0,i.zw)(new Date(t.time).toLocaleString("vi-VN")),1),(0,n._)("p",null,(0,i.zw)(t.message),1)])],2)],8,Uo)])))),128))],512),(0,n._)("form",{class:"chat-input",onSubmit:e[1]||(e[1]=(0,s.iM)(((...t)=>l.send&&l.send(...t)),["prevent"]))},[(0,n._)("label",zo,[No,(0,n.wy)((0,n._)("input",{type:"text",name:"message",placeholder:"Message...","onUpdate:modelValue":e[0]||(e[0]=t=>o.chatMessage=t),required:""},null,512),[[s.nr,o.chatMessage]])]),Eo],32),(0,n.Wm)(c,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])],64)}var Oo=a(2066),Ao={name:"ChatBox",components:{MessagePopup:He},created(){this.socket=(0,Oo.io)(X.host),this.loadMessages(),this.socketEvents()},unmounted(){this.socket.disconnect()},data(){return{chatMessage:"",chatMessages:[],loadingMessageID:null,message:{title:"",message:"",type:"",isDisplay:!1}}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),async loadMessages(){this.setIsLoading(!0);try{let t=await X.get("/chat"),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.error);this.chatMessages=e,setTimeout((()=>this.scrollToBottom()),250)}catch(t){this.setIsLoading(!1),this.showMessage("Lỗi",t.message,"error")}},async send(){try{this.pushLoadingMessage();let t=await X.post("/chat",{message:this.chatMessage}),e=await t.json();if(200!==t.status)throw new Error(e.error);this.finishLoadMessage(),this.chatMessage=""}catch(t){this.showMessage("Lỗi",t.message,"error")}},socketEvents(){this.socket.on("message",(t=>{this.isAuth(t.user.username)||this.chatMessages.push(t),setTimeout((()=>this.scrollToBottom()),250)}))},getAvatarURL(t){return X.getAvatarURL(t)},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},isAuth(t){return t==this.user.username},scrollToBottom(){const t=this.$refs.chatbox;t.scrollTop=t.scrollHeight+120},pushLoadingMessage(){let t={message:this.chatMessage,time:(new Date).toISOString(),user:this.$store.state.user,isLoading:!0};this.chatMessages.push(t),this.loadingMessageID=this.chatMessages.length-1},finishLoadMessage(){this.chatMessages[this.loadingMessageID].isLoading=!1}}};const Wo=(0,U.Z)(Ao,[["render",jo],["__scopeId","data-v-300e1ec4"]]);var Ko=Wo;const Ho={class:"popup"},qo={class:"container container-sm"},Bo={class:"success"},Ro=(0,n._)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n._)("span",{class:"material-icons mr-2"},"notifications_active"),(0,n._)("h3",null,"Bật Thông Báo")],-1),Fo=(0,n._)("p",null,"Bạn có muốn nhận thông báo khi có hoạt động mới không?",-1),$o=(0,n._)("p",null,"24h sau mình hỏi lại 😋😋",-1);function Zo(t,e,a,i,r,o){const l=(0,n.up)("MessagePopup");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(s.uT,{name:"fade-in"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",Ho,[(0,n._)("div",{class:"popup-bg",onClick:e[0]||(e[0]=(...t)=>o.closePopup&&o.closePopup(...t))}),(0,n._)("div",qo,[(0,n._)("div",Bo,[Ro,(0,n._)("span",{class:"material-icons btn-close",onClick:e[1]||(e[1]=(...t)=>o.closePopup&&o.closePopup(...t))},"close")]),(0,n._)("div",null,[Fo,$o,(0,n._)("div",null,[(0,n._)("button",{onClick:e[2]||(e[2]=(...t)=>o.requestPermission&&o.requestPermission(...t)),class:"btn btn-success d-inline-block"},"Có"),(0,n._)("button",{onClick:e[3]||(e[3]=(...t)=>o.closePopup&&o.closePopup(...t)),class:"btn d-inline-block ml-2"},"Không")])])])],512),[[s.F8,r.display]])])),_:1}),(0,n.Wm)(l,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}var Yo={name:"RequestNotifi",components:{MessagePopup:He},created(){this.showRequestPermissionPopup()},data(){return{display:!1,storageKey:"notifi-request-cooldown",message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{showRequestPermissionPopup(){"default"!==Notification.permission||this.isCooldown()||setTimeout((()=>{this.display=!0}),1e3)},requestPermission(){Notification.requestPermission((t=>{"denied"===t?(this.display=!1,this.showMessage("Lỗi","Bạn đã tắt quyền thông báo trong trình duyệt. Để bật lại, hãy vào cài đặt trang web của trình duyệt và kích hoạt quyền thông báo.","error")):"granted"===t&&(this.display=!1,this.subscribeNotifi(),this.showMessage("Thành Công","Từ giờ bạn sẽ nhận được thông báo về tin nhắn và các hoạt động mới.","success"))}))},subscribeNotifi(){const t=new BroadcastChannel("bc1");t.postMessage("grant-notifi-perm")},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},closePopup(){this.display=!1,this.setCooldownTime(1440)},isCooldown(){let t=localStorage.getItem(this.storageKey);if(null===t)return!1;let e=t-Date.now();return e>0},setCooldownTime(t){let e=Date.now()+parseInt(60*t*1e3);localStorage.setItem(this.storageKey,e)}}};const Go=(0,U.Z)(Yo,[["render",Zo]]);var Jo=Go;function Xo(t){let e=new Date,a=new Date(t),s=e-a,n=Math.floor(s/1e3);if(n<60)return"Vừa xong";let i=Math.floor(n/60);if(i<60)return i+" phút trước";let r=Math.floor(i/60);if(r<24)return r+" giờ trước";let o=e.getMonth()-a.getMonth(),l=e.getFullYear()-a.getFullYear(),h=Math.floor(r/24);if(h<30||0==o)return h+" ngày trước";if(l<1)return o+" tháng trước";if(o<=0){let t=e.getMonth()+(12-a.getMonth());return t+" tháng trước"}return l+" năm trước"}var Qo={name:"HomeView",components:{ChatBox:Ko,RequestNotifi:Jo,MarkdownViewer:vs},data(){return{diaries:[]}},created(){this.loadSessionData()||this.fetchDiaries()},computed:{...(0,l.rn)(["learningDiary"])},methods:{...(0,l.OI)(["setIsLoading"]),async fetchDiaries(){try{this.setIsLoading(!0);let t=await X.get("/study-diary/diary/all"),e=await t.json();if(this.setIsLoading(!1),200!=t.status)throw new Error(e.error);this.diaries=e.data,this.saveSessionData()}catch(t){throw this.setIsLoading(!1),t}},caculateTime(t){return ga(t)},caculatePassedTime(t){return Xo(t)},getTimeDiff(t,e){let a=new Date(t),s=new Date(e),n=s.getTime()-a.getTime();return{seconds:n/1e3,minutes:n/6e4,hours:n/36e5}},saveSessionData(){sessionStorage.setItem("homeviewDiaries",JSON.stringify(this.diaries))},loadSessionData(){let t=sessionStorage.getItem("homeviewDiaries");if(!t)return!1;let e=JSON.parse(t);return this.diaries=e,!0},getAvatarURL(t){return X.getAvatarURL(t)}}};const tl=(0,U.Z)(Qo,[["render",Io],["__scopeId","data-v-b24dc9b4"]]);var el=tl;const al={class:"container container-sm"},sl={style:{"text-align":"center"}},nl=(0,n._)("h1",null,"404",-1),il=(0,n._)("p",null,"Trang không tồn tại",-1),rl=(0,n.Uk)("[Về Trang Chủ]");function ol(t,e,a,s,i,r){const o=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",al,[(0,n._)("div",sl,[nl,il,(0,n._)("p",null,[(0,n.Wm)(o,{to:"/login"},{default:(0,n.w5)((()=>[rl])),_:1})])])])}var ll={name:"NotFound"};const hl=(0,U.Z)(ll,[["render",ol]]);var cl=hl;const ul=[{path:"/",name:"home",component:el,meta:{title:"Trang Chủ - MTLKMS",metaTags:[{name:"description",content:"Góc nhỏ của nhà Vịt - Nơi cùng nhau học tập và chém gió ^^"},{property:"og:description",content:"Góc nhỏ của nhà Vịt - Nơi cùng nhau học tập và chém gió ^^"}]}},{path:"/404",name:"404",component:cl,meta:{title:"Not Found"}},...Fe,...un,...yr,...Ar,...to],dl=(0,at.p7)({history:(0,at.PO)("/"),routes:ul,scrollBehavior(t,e,a){return new Promise((t=>{setTimeout((()=>{t(a||{top:0})}),500)}))}});dl.beforeEach(((t,e,a)=>{const s=t.matched.slice().reverse().find((t=>t.meta&&t.meta.title)),n=t.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags)),i=e.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags));if(s?lt.commit("setTitle",s.meta.title):i&&lt.commit("setTitle",i.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((t=>t.parentNode.removeChild(t))),!n)return a();n.meta.metaTags.map((t=>{const e=document.createElement("meta");return Object.keys(t).forEach((a=>{e.setAttribute(a,t[a])})),e.setAttribute("data-vue-router-controlled",""),e})).forEach((t=>document.head.appendChild(t))),a()}));var gl=dl;(0,s.ri)(Y).use(gl).use(lt).mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,i){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],i=t[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(c--,1);var h=n();void 0!==h&&(e=h)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[s,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,r=s[0],o=s[1],l=s[2],h=0;if(r.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(e&&e(s);h<r.length;h++)i=r[h],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},s=self["webpackChunkmtlkms"]=self["webpackChunkmtlkms"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7734)}));s=a.O(s)})();